; Zero-page variables

	.zp

ptr:	.ds   2 	; pointer to buffer address
a_cnt:	.ds   1
x_cnt:	.ds   1


	;; scroll counter
scrx:	.ds	2
scry:	.ds	2
	;...

;z_sprx: .ds     2
;z_spry: .ds     2

z_tmp0:	.ds	1
z_tmp1:	.ds	1
z_tmp2:	.ds	1
z_tmp3:	.ds	1
z_tmp4:	.ds	1
z_tmp5:	.ds	1
z_tmp6:	.ds	1
z_tmp7:	.ds	1
z_tmp8:	.ds	1
z_tmp9:	.ds	1
z_tmp10:	.ds	1
z_tmp11:	.ds	1
z_tmp12:	.ds	1
z_tmp13:	.ds	1
z_tmp14:	.ds	1
z_tmp15:	.ds	1

z_curchr_x:	.ds	3
z_curchr_y:	.ds	3

z_frame:	.ds	1

;--- CODE area ----------

	.code
	.bank MAIN_BANK
	.org  $C000

;       wait VSync (polling)
waitVsync:
.wait:  tst     #$20,VdcStatus
        beq     .wait
        rts



;
;       main
;
main:	
        lda     #BANK(bg_pattern)
        tam     #PAGE(bg_pattern)

	; set bg palette
        lda     #LOW(0*16)
        sta     VceIndexL
        lda     #HIGH(0*16)
        sta     VceIndexH
        tia     bg_palette,VceData,16*16*2

	; set sprite palette
        lda     #LOW(16*16)
        sta     VceIndexL
        lda     #HIGH(16*16)
        sta     VceIndexH
        tia     spr_palette,VceData,16*16*2

	; set bg pattern
	st0	#0
        lda     #$00
        sta     VdcDataL
        lda     #$10
        sta     VdcDataH
	st0	#2
	tia	bg_pattern,VdcData,bg_pattern_size

	; set sprite pattern
	st0	#0
        lda     #$00
        sta     VdcDataL
        lda     #$40
        sta     VdcDataH
	st0	#2
	tia	spr_pattern,VdcData,spr_pattern_size

	;vsync			; vsync to avoid snow
        jsr     waitVsync

	; draw background
	st0	#0
	st1	#0
	st2	#0

	st0	#2

	lda	#3
	ldy	#20
.loop1:	phy
	ldy	#$01
	
	ldx	#64
.loop2:	sta	VdcDataL
	sty	VdcDataH
.next:	dex
	bne	.loop2
	ply
	dey
	bne	.loop1

	lda	#2
	ldy	#20
.loop3:	phy
	ldy	#$01
	
	ldx	#64
.loop4:	sta	VdcDataL
	sty	VdcDataH
.next2:	dex
	bne	.loop4
	ply
	dey
	bne	.loop3

	lda	#1
	ldy	#2
.loop5:	phy
	ldy	#$01
	
	ldx	#64
.loop6:	sta	VdcDataL
	sty	VdcDataH
	dex
	bne	.loop6
	ply
	dey
	bne	.loop5


	;; initialize sprite

;	jsr	spr_init
;	jsr	spr_update


	jsr	CDRVinit
	jsr	PL_init
	;;
	;; .loop:	bra	.loop
				;
	stz	<scrx
	stz	<scrx+1
	stz	<scry
	stz	<scry+1

	jsr	initPsgTest

	;jsr PB_init		; player's bullet
	;jsr	EB_init
	;jsr	EN_init

mainloop:
;--
; enemy
;--
	tst	#$03,<z_frame
	bne	.skipen

	jsr	ENcreate
.skipen:

	jsr	CDRVmove

	jsr	CLtestPBullet2Enemy
	jsr	CLtestPlayer2EBullet

	jsr	CDRVallocSprite
	jsr	CDRVsetSprite

;       scroll
	ldx	#scrx&$ff
	clc
	set
	adc	#1
	inx
	set
	adc	#0
 	
;	ldx	PL_chr
;	lda	CH_yh,x
;	sec
;	sbc	#(64+16)/2
;	tax
;	lda	ScrollX,x
;	sta	scry
;	stz	scry+1


;
;       vsync
;
        jsr     spr_update
        jsr     waitVsync

;       scroll
	st0	#7
	lda	<scrx
	sta	VdcDataL
	lda	<scrx+1
	sta	VdcDataH

	st0	#8
	lda	<scry
	sta	VdcDataL
	lda	<scry+1
	sta	VdcDataH

;       pad
        jsr     readPad

	inc	<z_frame
	jmp	mainloop

	

;.loop:	bra	.loop

;	psg test	
initPsgTest:
	lda	#0
	sta	PsgChannel

;	write wave data
	lda	#$40
	sta	PsgCtrl
	stz	PsgCtrl

	clx
.loop:	lda	.wave,x
	cmp	#$ff
	beq	.loopend
	sta	PsgWave
	inx
	bra	.loop

.loopend:
;	set frequency
	lda	#$fe
	sta	PsgFreqL
	stz	PsgFreqH

;	set volume
	lda	#$ff
	sta	PsgChVol
	sta	PsgMainVol

	lda	#$8f
	sta	PsgCtrl

	rts

.wave:
	.db	$1f,$1d,$1b,$19,$17,$15,$13,$11
	.db	$0f,$0d,$0b,$09,$07,$05,$03,$01
	.db	$1f,$1d,$1b,$19,$17,$15,$13,$11
	.db	$0f,$0d,$0b,$09,$07,$05,$03,$01
	.db	$ff	

	.db	$1f,$1f,$1f,$1f,$1f,$1f,$1f,$1f
	.db	$00,$00,$00,$00,$00,$00,$00,$00
	.db	$00,$00,$00,$00,$00,$00,$00,$00
	.db	$00,$00,$00,$00,$00,$00,$00,$00
	.db	$ff

	.db	$0f,$12,$15,$17,$19,$1b,$1d,$1E
	.db	$1e,$1e,$1d,$1b,$19,$17,$15,$12
	.db	$0f,$0c,$09,$07,$05,$03,$01,$00
	.db	$00,$00,$01,$03,$05,$07,$09,$0c
	.db	$ff	



	.if	0
	;; test sprite
spr_init:
;	vsync
        jsr     waitVsync
	;; set palette
	;; 	map   spr_palette
;	set_sprpal #0,spr_palette
        lda     #LOW(0*16+16*16)
        sta     VceIndexL
        lda     #HIGH(0*16+16*16)
        sta     VceIndexH
        tia     spr_palette,VceData,16*2

;	set_sprpal #1,cgpal2
        lda     #LOW(1*16+16*16)
        sta     VceIndexL
        lda     #HIGH(1*16+16*16)
        sta     VceIndexH
        tia     cgpal2,VceData,16*2

	;; set sprite pattern
;	vload	$4000,spr_pattern_0,#16*4
	st0	#0
        lda     #$00
        sta     VdcDataL
        lda     #$40
        sta     VdcDataH
	st0	#2
	tia	spr_pattern_0,VdcData,16*4*2

;	vload	$4080,spr_pattern_1,#16*4
	st0	#0
        lda     #$00
        sta     VdcDataL
        lda     #$50
        sta     VdcDataH
	st0	#2
	tia	spr_pattern_1,VdcData,16*4*2*4

;
	st0	#0
        lda     #$00
        sta     VdcDataL
        lda     #$60
        sta     VdcDataH
	st0	#2
	tia	spr_pat_0,VdcData,16*4*2*8

	st0	#0
        lda     #$00
        sta     VdcDataL
        lda     #$64
        sta     VdcDataH
	st0	#2
	tia	spr_pattern_eb,VdcData,16*4

	;; clear satb
	stz	satb
	tii	satb,satb+1,512-1

	;; set satb 0
	lda	#$40
	sta	satb+0
	stz	satb+1

	lda	#$20
	sta	satb+2
	stz	satb+3

	stz	satb+4
	lda	#$2		;vram address = $4000 -> $200
	sta	satb+5

	lda	#$02		;priority = bg & color=0
	sta	satb+6
	stz	satb+7

	;; set satb 1
	lda	#$80
	sta	satb+8
	stz	satb+9

	lda	#$60
	sta	satb+10
	stz	satb+11

	lda	#$0f
	sta	satb+12
	lda	#$03		;vram address = $4040 -> $202
	sta	satb+13

	lda	#$80		;priority = sprite & color=1
	sta	satb+14
        lda     #$30
	sta	satb+15

	rts

	.endif

spr_update:
	st0	#0
	st1	#$00
	st2	#$7f
	st0	#2
	tia	satb,VdcDataL,512
	rts

ScrollX:
        .db 0
        .db 0
        .db 1
        .db 2
        .db 3
        .db 3
        .db 4
        .db 5
        .db 6
        .db 6
        .db 7
        .db 8
        .db 9
        .db 10
        .db 10
        .db 11
        .db 12
        .db 13
        .db 13
        .db 14
        .db 15
        .db 16
        .db 16
        .db 17
        .db 18
        .db 19
        .db 20
        .db 20
        .db 21
        .db 22
        .db 23
        .db 23
        .db 24
        .db 25
        .db 26
        .db 26
        .db 27
        .db 28
        .db 29
        .db 30
        .db 30
        .db 31
        .db 32
        .db 33
        .db 33
        .db 34
        .db 35
        .db 36
        .db 36
        .db 37
        .db 38
        .db 39
        .db 40
        .db 40
        .db 41
        .db 42
        .db 43
        .db 43
        .db 44
        .db 45
        .db 46
        .db 46
        .db 47
        .db 48
        .db 49
        .db 50
        .db 50
        .db 51
        .db 52
        .db 53
        .db 53
        .db 54
        .db 55
        .db 56
        .db 56
        .db 57
        .db 58
        .db 59
        .db 60
        .db 60
        .db 61
        .db 62
        .db 63
        .db 63
        .db 64
        .db 65
        .db 66
        .db 66
        .db 67
        .db 68
        .db 69
        .db 70
        .db 70
        .db 71
        .db 72
        .db 73
        .db 73
        .db 74
        .db 75
        .db 76
        .db 76
        .db 77
        .db 78
        .db 79
        .db 80


	;...

;ｱｱｱ[ USER DATA ]ｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱ


	.bank  MAIN_BANK+1
	.org   $6000


;--------
;--------
bg_palette:
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000

bg_pattern:
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

        dw $00ff,$00ff,$00ff,$00ff,$00ff,$00ff,$00ff,$00ff
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

        dw $ff00,$ff00,$ff00,$ff00,$ff00,$ff00,$ff00,$ff00
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

        dw $0000,$0040,$0060,$0010,$0000,$0008,$0000,$0000
        dw $ff00,$ff00,$ff00,$ff00,$ff00,$ff00,$ff00,$ff00
bg_pattern_end:

bg_pattern_size	.equ	bg_pattern_end-bg_pattern

;--------
;--------
spr_palette:
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000	;pl
        dw $0000,$01ff,$01c7,$0047,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000	;pb
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000	;eb
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

spr_pattern:

spr_pattern_eb:
	dw	$3c00,$7e00,$ff00,$ff00,$ff00,$ff00,$7e00,$3c00
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000


spr_pattern_pb:
	dw	$0000,$0036,$0036,$0000,$0000,$0036,$0036,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0036,$0036,$0036,$0036,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

	dw	$0000,$0000,$0000,$0c00,$6c00,$7800,$d800,$c000
	dw	$0000,$0600,$3600,$3000,$0000,$1800,$d800,$c000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

	dw	$0000,$0000,$3000,$6c00,$d800,$b000,$2000,$0000
	dw	$0c00,$1b00,$0600,$0000,$c000,$b000,$2000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

spr_pattern_pl:
	dw	$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff
	dw	$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

	dw	$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff
	dw	$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

	dw	$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff
	dw	$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

	dw	$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff
	dw	$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

        dw $0000,$0000,$0000,$0100,$0100,$003f,$0040,$0080
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0e00,$0100,$0300,$0300,$0300,$00ff,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $7000,$8000,$c000,$c000,$c000,$00ff,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$8000,$8000,$00fc,$0002,$0001
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0080,$0080,$0080,$00c0,$007f,$003f,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$00ff,$00ff,$1400,$1400
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$00ff,$00ff,$2800,$2800
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0001,$0001,$0001,$0003,$00fe,$00fc,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $1400,$1400,$0800,$0400,$0300,$0300,$0300,$0300
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $2800,$2800,$1000,$2000,$c000,$c000,$c000,$c000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0001,$0003,$0003,$0001,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0300,$0300,$01fe,$01fe,$01fe,$01fe,$01fe,$0100
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $c000,$c000,$807f,$807f,$807f,$807f,$807f,$8000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0080,$00c0,$00c0,$0080,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

spr_pattern_end:

spr_pattern_size	.equ	spr_pattern_end-spr_pattern

	;; satb
	.bss
satb	.ds 512	; the local SATB
