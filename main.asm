; Zero-page variables

	.zp

ptr:	.ds   2 	; pointer to buffer address
a_cnt:	.ds   1
x_cnt:	.ds   1


	;; scroll counter
scrx:	.ds	2
scry:	.ds	2
	;...

;z_sprx: .ds     2
;z_spry: .ds     2

z_tmp0:	.ds	1
z_tmp1:	.ds	1
z_tmp2:	.ds	1
z_tmp3:	.ds	1
z_tmp4:	.ds	1
z_tmp5:	.ds	1
z_tmp6:	.ds	1
z_tmp7:	.ds	1
z_tmp8:	.ds	1
z_tmp9:	.ds	1
z_tmp10:	.ds	1
z_tmp11:	.ds	1
z_tmp12:	.ds	1
z_tmp13:	.ds	1
z_tmp14:	.ds	1
z_tmp15:	.ds	1

z_curchr_x:	.ds	3
z_curchr_y:	.ds	3

z_frame:	.ds	1

;--- CODE area ----------

	.code
	.bank MAIN_BANK
	.org  $C000

;       wait VSync (polling)
waitVsync:
.wait:  tst     #$20,VdcStatus
        beq     .wait
        rts



;
;       main
;
main:	
        lda     #BANK(bg_pattern)
        tam     #PAGE(bg_pattern)

	; set bg palette
        lda     #LOW(0*16)
        sta     VceIndexL
        lda     #HIGH(0*16)
        sta     VceIndexH
        tia     bg_palette,VceData,16*16*2

	; set sprite palette
        lda     #LOW(16*16)
        sta     VceIndexL
        lda     #HIGH(16*16)
        sta     VceIndexH
        tia     spr_palette,VceData,16*16*2

	; set bg pattern
	st0	#0
        lda     #$00
        sta     VdcDataL
        lda     #$10
        sta     VdcDataH
	st0	#2
	tia	bg_pattern,VdcData,bg_pattern_size

	; set sprite pattern
	st0	#0
        lda     #$00
        sta     VdcDataL
        lda     #$40
        sta     VdcDataH
	st0	#2
	tia	spr_pattern,VdcData,spr_pattern_size

	;vsync			; vsync to avoid snow
        jsr     waitVsync

	; draw background
	st0	#0
	st1	#0
	st2	#0

	st0	#2

	lda	#3
	ldy	#20
.loop1:	phy
	ldy	#$01
	
	ldx	#64
.loop2:	sta	VdcDataL
	sty	VdcDataH
.next:	dex
	bne	.loop2
	ply
	dey
	bne	.loop1

	lda	#2
	ldy	#20
.loop3:	phy
	ldy	#$01
	
	ldx	#64
.loop4:	sta	VdcDataL
	sty	VdcDataH
.next2:	dex
	bne	.loop4
	ply
	dey
	bne	.loop3

	lda	#1
	ldy	#2
.loop5:	phy
	ldy	#$01
	
	ldx	#64
.loop6:	sta	VdcDataL
	sty	VdcDataH
	dex
	bne	.loop6
	ply
	dey
	bne	.loop5


	;; initialize sprite

;	jsr	spr_init
;	jsr	spr_update


	jsr	CDRVinit
	jsr	PL_init
	;;
	;; .loop:	bra	.loop
				;
	stz	<scrx
	stz	<scrx+1
	stz	<scry
	stz	<scry+1

	jsr	initPsgTest

	;jsr PB_init		; player's bullet
	;jsr	EB_init
	;jsr	EN_init

mainloop:
;--
; enemy
;--
	tst	#$03,<z_frame
	bne	.skipen

;	ldy	#1
;	jsr	ENcreate
	jsr	ENcreate_Tank
.skipen:

	jsr	CDRVmove

	jsr	CLtestPBullet2Enemy
	;jsr	CLtestPlayer2EBullet

	jsr	CDRVallocSprite
	jsr	CDRVsetSprite

;       scroll
	ldx	#scrx&$ff
	clc
	set
	adc	#1
	inx
	set
	adc	#0
 	
;	ldx	PL_chr
;	lda	CH_yh,x
;	sec
;	sbc	#(64+16)/2
;	tax
;	lda	ScrollX,x
;	sta	scry
;	stz	scry+1


;
;       vsync
;
        jsr     spr_update
        jsr     waitVsync

;       scroll
	st0	#7
	lda	<scrx
	sta	VdcDataL
	lda	<scrx+1
	sta	VdcDataH

	st0	#8
	lda	<scry
	sta	VdcDataL
	lda	<scry+1
	sta	VdcDataH

;       pad
        jsr     readPad

	inc	<z_frame
	jmp	mainloop

	

;.loop:	bra	.loop

;	psg test	
initPsgTest:
	lda	#0
	sta	PsgChannel

;	write wave data
	lda	#$40
	sta	PsgCtrl
	stz	PsgCtrl

	clx
.loop:	lda	.wave,x
	cmp	#$ff
	beq	.loopend
	sta	PsgWave
	inx
	bra	.loop

.loopend:
;	set frequency
	lda	#$fe
	sta	PsgFreqL
	stz	PsgFreqH

;	set volume
	lda	#$ff
	sta	PsgChVol
	sta	PsgMainVol

	lda	#$8f
	sta	PsgCtrl

	rts

.wave:
	.db	$1f,$1d,$1b,$19,$17,$15,$13,$11
	.db	$0f,$0d,$0b,$09,$07,$05,$03,$01
	.db	$1f,$1d,$1b,$19,$17,$15,$13,$11
	.db	$0f,$0d,$0b,$09,$07,$05,$03,$01
	.db	$ff	

	.db	$1f,$1f,$1f,$1f,$1f,$1f,$1f,$1f
	.db	$00,$00,$00,$00,$00,$00,$00,$00
	.db	$00,$00,$00,$00,$00,$00,$00,$00
	.db	$00,$00,$00,$00,$00,$00,$00,$00
	.db	$ff

	.db	$0f,$12,$15,$17,$19,$1b,$1d,$1E
	.db	$1e,$1e,$1d,$1b,$19,$17,$15,$12
	.db	$0f,$0c,$09,$07,$05,$03,$01,$00
	.db	$00,$00,$01,$03,$05,$07,$09,$0c
	.db	$ff	



	.if	0
	;; test sprite
spr_init:
;	vsync
        jsr     waitVsync
	;; set palette
	;; 	map   spr_palette
;	set_sprpal #0,spr_palette
        lda     #LOW(0*16+16*16)
        sta     VceIndexL
        lda     #HIGH(0*16+16*16)
        sta     VceIndexH
        tia     spr_palette,VceData,16*2

;	set_sprpal #1,cgpal2
        lda     #LOW(1*16+16*16)
        sta     VceIndexL
        lda     #HIGH(1*16+16*16)
        sta     VceIndexH
        tia     cgpal2,VceData,16*2

	;; set sprite pattern
;	vload	$4000,spr_pattern_0,#16*4
	st0	#0
        lda     #$00
        sta     VdcDataL
        lda     #$40
        sta     VdcDataH
	st0	#2
	tia	spr_pattern_0,VdcData,16*4*2

;	vload	$4080,spr_pattern_1,#16*4
	st0	#0
        lda     #$00
        sta     VdcDataL
        lda     #$50
        sta     VdcDataH
	st0	#2
	tia	spr_pattern_1,VdcData,16*4*2*4

;
	st0	#0
        lda     #$00
        sta     VdcDataL
        lda     #$60
        sta     VdcDataH
	st0	#2
	tia	spr_pat_0,VdcData,16*4*2*8

	st0	#0
        lda     #$00
        sta     VdcDataL
        lda     #$64
        sta     VdcDataH
	st0	#2
	tia	spr_pattern_eb,VdcData,16*4

	;; clear satb
	stz	satb
	tii	satb,satb+1,512-1

	;; set satb 0
	lda	#$40
	sta	satb+0
	stz	satb+1

	lda	#$20
	sta	satb+2
	stz	satb+3

	stz	satb+4
	lda	#$2		;vram address = $4000 -> $200
	sta	satb+5

	lda	#$02		;priority = bg & color=0
	sta	satb+6
	stz	satb+7

	;; set satb 1
	lda	#$80
	sta	satb+8
	stz	satb+9

	lda	#$60
	sta	satb+10
	stz	satb+11

	lda	#$0f
	sta	satb+12
	lda	#$03		;vram address = $4040 -> $202
	sta	satb+13

	lda	#$80		;priority = sprite & color=1
	sta	satb+14
        lda     #$30
	sta	satb+15

	rts

	.endif

spr_update:
	st0	#0
	st1	#$00
	st2	#$7f
	st0	#2
	tia	satb,VdcDataL,512
	rts

ScrollX:
        .db 0
        .db 0
        .db 1
        .db 2
        .db 3
        .db 3
        .db 4
        .db 5
        .db 6
        .db 6
        .db 7
        .db 8
        .db 9
        .db 10
        .db 10
        .db 11
        .db 12
        .db 13
        .db 13
        .db 14
        .db 15
        .db 16
        .db 16
        .db 17
        .db 18
        .db 19
        .db 20
        .db 20
        .db 21
        .db 22
        .db 23
        .db 23
        .db 24
        .db 25
        .db 26
        .db 26
        .db 27
        .db 28
        .db 29
        .db 30
        .db 30
        .db 31
        .db 32
        .db 33
        .db 33
        .db 34
        .db 35
        .db 36
        .db 36
        .db 37
        .db 38
        .db 39
        .db 40
        .db 40
        .db 41
        .db 42
        .db 43
        .db 43
        .db 44
        .db 45
        .db 46
        .db 46
        .db 47
        .db 48
        .db 49
        .db 50
        .db 50
        .db 51
        .db 52
        .db 53
        .db 53
        .db 54
        .db 55
        .db 56
        .db 56
        .db 57
        .db 58
        .db 59
        .db 60
        .db 60
        .db 61
        .db 62
        .db 63
        .db 63
        .db 64
        .db 65
        .db 66
        .db 66
        .db 67
        .db 68
        .db 69
        .db 70
        .db 70
        .db 71
        .db 72
        .db 73
        .db 73
        .db 74
        .db 75
        .db 76
        .db 76
        .db 77
        .db 78
        .db 79
        .db 80


	;...

;ｱｱｱ[ USER DATA ]ｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱｱ


	.bank  MAIN_BANK+1
	.org   $6000


;--------
;--------
bg_palette:
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000

bg_pattern:
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

        dw $00ff,$00ff,$00ff,$00ff,$00ff,$00ff,$00ff,$00ff
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

        dw $ff00,$ff00,$ff00,$ff00,$ff00,$ff00,$ff00,$ff00
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

        dw $0000,$0040,$0060,$0010,$0000,$0008,$0000,$0000
        dw $ff00,$ff00,$ff00,$ff00,$ff00,$ff00,$ff00,$ff00
bg_pattern_end:

bg_pattern_size	.equ	bg_pattern_end-bg_pattern

;--------
;--------
spr_palette:
        dw $0000,$00ba,$0071,$0069,$0020,$0018,$0018,$0010,$0164,$011b,$00d2,$0092,$00e0,$0098,$0100,$0000	;pl
        dw $0000,$01ff,$016d,$0124,$00db,$0092,$01cf,$0145,$0104,$00c3,$0082,$01c9,$0141,$0100,$00c0,$0000      ;pb
;        dw $0000,$01ff,$01c7,$0047,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000	;pb
        dw $00db,$01fe,$01fc,$01fa,$01b9,$0179,$0139,$00b8,$0038,$0030,$0028,$0020,$0018,$0010,$0010,$0008      ;eb
 ;       dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000	;eb
        dw $0004,$00da,$00da,$0091,$0091,$0048,$0048,$0048,$00e0,$0098,$0098,$0050,$0050,$0124,$0020,$0000	;en
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0078,$016d,$0000,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

spr_pattern:

spr_pattern_eb:
        dw $0000,$0000,$0000,$0000,$0140,$01c0,$0570,$0520
        dw $05f0,$0200,$01c0,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$01c0,$01a0,$01e0
        dw $01e0,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$01c0,$0220,$0610,$0610
        dw $0610,$03e0,$01c0,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

        dw $0000,$0000,$0000,$0000,$0140,$01c0,$0570,$0520
        dw $05f0,$0200,$01c0,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$01c0,$01a0,$01e0
        dw $01e0,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$01c0,$01e0,$01e0
        dw $01e0,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$01c0,$0220,$0610,$0610
        dw $0610,$03e0,$01c0,$0000,$0000,$0000,$0000,$0000

;	dw	$3c00,$7e00,$ff00,$ff00,$ff00,$ff00,$7e00,$3c00
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000


spr_pattern_pb:
        dw $0000,$0000,$0000,$0000,$0530,$0530,$0530,$0000
        dw $0530,$0530,$0530,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$09c0,$09c0,$09c0,$0000
        dw $09c0,$09c0,$09c0,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$01c0,$01c0,$01c0,$0000
        dw $01c0,$01c0,$01c0,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0e00,$0e00,$0e00,$0000
        dw $0e00,$0e00,$0e00,$0000,$0000,$0000,$0000,$0000

spr_pattern_pb2:
        dw $0000,$0000,$0000,$0000,$00c0,$00c0,$0300,$0530
        dw $0430,$0180,$0080,$0600,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0100,$0380,$0100
        dw $0840,$08c0,$0480,$0800,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0100,$0380,$0100
        dw $0040,$00c0,$0080,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0600
        dw $0c80,$0900,$0700,$0e00,$0000,$0000,$0000,$0000

;	dw	$0000,$0036,$0036,$0000,$0000,$0036,$0036,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0036,$0036,$0036,$0036,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

;	dw	$0000,$0000,$0000,$0c00,$6c00,$7800,$d800,$c000
;	dw	$0000,$0600,$3600,$3000,$0000,$1800,$d800,$c000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

;	dw	$0000,$0000,$3000,$6c00,$d800,$b000,$2000,$0000
;	dw	$0c00,$1b00,$0600,$0000,$c000,$b000,$2000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
;	dw	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

spr_pattern_pl:
        dw $0001,$0006,$001d,$000c,$001c,$0006,$001d,$400c
        dw $601c,$200e,$001d,$6006,$601d,$6044,$607c,$065e
        dw $0001,$0007,$000f,$000f,$000d,$000f,$000d,$100f
        dw $380f,$780f,$780d,$380f,$380f,$387f,$3fbf,$0417
        dw $0002,$0004,$001e,$001f,$001b,$0014,$001e,$601e
        dw $401f,$401d,$601a,$5014,$401e,$4003,$401f,$003c
        dw $0000,$0000,$0000,$0000,$0004,$0008,$0000,$0000
        dw $0000,$0000,$0004,$0008,$000c,$007c,$07fc,$fffc
        dw $8000,$6000,$9000,$7000,$1000,$3000,$9000,$7800
        dw $9000,$7000,$1080,$5080,$9000,$7400,$1100,$7a00
        dw $c000,$8000,$e000,$8000,$e000,$c000,$e000,$8400
        dw $e000,$8000,$e000,$a000,$e080,$8a80,$e000,$8100
        dw $0000,$0000,$0000,$0000,$8000,$c000,$2000,$0400
        dw $0000,$8000,$c000,$2000,$0000,$0400,$8400,$0400
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0c00
        dw $0000,$0080,$0080,$0000,$0080,$0e80,$0f00,$0f00
        dw $07ff,$0077,$001f,$2006,$001d,$200e,$601c,$400c
        dw $001d,$0006,$001c,$000c,$001d,$0006,$0001,$0000
        dw $7fff,$787f,$780f,$780f,$780d,$780f,$380f,$100f
        dw $000d,$000f,$000d,$000f,$000f,$0007,$0001,$0000
        dw $781f,$7003,$601e,$5014,$601a,$401d,$401f,$601e
        dw $001e,$0014,$001b,$001f,$001e,$0004,$0002,$0000
        dw $07fc,$007c,$000c,$0008,$0004,$0000,$0000,$0000
        dw $0000,$0008,$0004,$0000,$0000,$0000,$0000,$0000
        dw $9400,$7e00,$9080,$5080,$1000,$7000,$9000,$5800
        dw $9000,$3000,$1000,$7000,$9000,$6000,$8000,$0000
        dw $eb00,$8a00,$e000,$a000,$e080,$8080,$e000,$a400
        dw $e000,$c000,$e000,$8000,$e000,$8000,$c000,$0000
        dw $8400,$0400,$0000,$2000,$c000,$8000,$0000,$2400
        dw $4000,$c000,$8000,$0000,$0000,$0000,$0000,$0000
        dw $0f00,$0e80,$0080,$0000,$0080,$0080,$0000,$0c00
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000


        dw $0000,$0000,$0000,$0100,$0100,$003f,$0040,$0080
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0e00,$0100,$0300,$0300,$0300,$00ff,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $7000,$8000,$c000,$c000,$c000,$00ff,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$8000,$8000,$00fc,$0002,$0001
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0080,$0080,$0080,$00c0,$007f,$003f,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$00ff,$00ff,$1400,$1400
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$00ff,$00ff,$2800,$2800
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0001,$0001,$0001,$0003,$00fe,$00fc,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $1400,$1400,$0800,$0400,$0300,$0300,$0300,$0300
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $2800,$2800,$1000,$2000,$c000,$c000,$c000,$c000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0001,$0003,$0003,$0001,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0300,$0300,$01fe,$01fe,$01fe,$01fe,$01fe,$0100
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $c000,$c000,$807f,$807f,$807f,$807f,$807f,$8000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0080,$00c0,$00c0,$0080,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000


spr_pattern_en:
        dw $0000,$0000,$0000,$0000,$0fff,$0400,$8597,$c3ff
        dw $ddfb,$d9ff,$c39d,$dd3e,$dd70,$d97b,$d9cf,$d0ce
        dw $0000,$0000,$0000,$0000,$0800,$03ff,$8268,$fc00
        dw $ddff,$ddef,$c1ff,$ddff,$ddff,$ddff,$ddef,$ddf7
        dw $0000,$0000,$0000,$0000,$3000,$7828,$f800,$ffff
        dw $e207,$e21f,$fe3f,$e27f,$e27f,$e2ef,$e2df,$e2d6
        dw $0000,$0000,$0000,$0000,$0000,$0028,$8000,$c000
        dw $c003,$c00d,$c01c,$c026,$c072,$c04b,$c097,$c0ce
        dw $0000,$0000,$0000,$0000,$ffff,$0007,$24c7,$fff8
        dw $bff6,$fffa,$fa7a,$bfba,$ddba,$6dfa,$aafa,$a67a
        dw $0000,$0000,$0000,$0000,$0000,$fff8,$db38,$0007
        dw $fefe,$ef76,$f7b6,$fbd6,$ffd6,$ffd6,$ffd6,$dfd6
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$ffff
        dw $c000,$f000,$f800,$fc00,$fc00,$7e00,$be00,$0200
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $8000,$e000,$b000,$a800,$f400,$e400,$ea00,$2200
        dw $d8de,$d87b,$ddff,$c3b7,$dc93,$d9cc,$d1fb,$ffff
        dw $8400,$8723,$c7ff,$ffff,$0000,$0000,$0000,$0000
        dw $ddef,$ddff,$ddfb,$c1fa,$ddfe,$ddff,$ddff,$f800
        dw $83ff,$80dc,$f800,$ffff,$0000,$0000,$0000,$0000
        dw $e2de,$e2ef,$e27f,$fe7f,$e23f,$e21f,$e207,$c000
        dw $f800,$f800,$ffff,$ffff,$0000,$0000,$0000,$0000
        dw $c08e,$c04f,$c05b,$c032,$c012,$c00c,$c003,$c000
        dw $8000,$8000,$c000,$ffff,$0000,$0000,$0000,$0000
        dw $d6fa,$b4ba,$6dba,$fdfa,$fafa,$76fa,$bffa,$ffff
        dw $6307,$0027,$fff8,$fffe,$0000,$0000,$0000,$0000
        dw $dfd6,$dfd6,$7fd6,$7bd6,$57b6,$ef76,$fef6,$0000
        dw $9cf8,$ffd8,$0007,$fffe,$0000,$0000,$0000,$0000
        dw $0200,$8200,$e400,$fc00,$f800,$f000,$c000,$0000
        dw $0000,$0000,$ffff,$fffe,$0000,$0000,$0000,$0000
        dw $2200,$a000,$e400,$7800,$5000,$6000,$8000,$0000
        dw $0000,$0000,$0000,$fffe,$0000,$0000,$0000,$0000

spr_pattern_turret00:
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0003,$000c,$0010,$0060,$004f,$00fc,$0018,$bc38
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0004,$0010,$0020,$0040,$0070,$00d3,$01f7,$c214
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0007,$001f,$003f,$007f,$0078,$00e8,$fe08,$0008
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0040,$0040,$00c0,$01e0,$01e3
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $fe00,$0180,$0c40,$1e40,$3f40,$3f20,$1e20,$0ca0
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0c00,$1200,$e900,$e500,$f380,$5f00
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $fe00,$ff80,$f3c0,$e1c0,$00c0,$00e0,$0060,$0060
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$a000
        dw $fe10,$00d4,$3fc4,$ffe0,$0ff0,$00fc,$007f,$003f
        dw $000f,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $01fd,$00f9,$3ff8,$ffff,$0fff,$00ff,$007f,$003f
        dw $000f,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $fe09,$00e9,$3ff8,$ffff,$0ffe,$00ff,$007f,$003f
        dw $000f,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $01e3,$00c3,$3fc3,$ffc0,$0fe1,$00f0,$007c,$003f
        dw $000f,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $00a0,$01e0,$0580,$07c0,$fbc0,$0280,$f900,$fe00
        dw $f800,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $5f00,$5e00,$5a00,$f800,$0400,$fd00,$ff00,$fe00
        dw $f800,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0060,$00e0,$00c0,$ffc0,$03c0,$ff80,$ff00,$fe00
        dw $f800,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $a000,$a000,$a000,$0000,$fc00,$0000,$0100,$fe00
        dw $f800,$0000,$0000,$0000,$0000,$0000,$0000,$0000

spr_pattern_turret01:
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0006
        dw $2009,$5810,$3635,$8e0c,$6028,$1f8b,$0ff4,$0398
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $4000,$2018,$09e3,$803b,$6197,$1ff4,$0fe8,$03e2
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$2006
        dw $180f,$471f,$303c,$8e04,$6008,$1f88,$0fd0,$03f2
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0010,$00e0,$81f0,$61e0,$1fe0,$0fc3,$0387
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $c000,$3000,$0c00,$0f00,$1e80,$bf40,$3f40,$1f40
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$cc00,$fa00,$6900,$e500,$b700
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $c000,$f000,$fc00,$3300,$0180,$00c0,$00c0,$00c0
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$4000
        dw $01d8,$01c1,$01c0,$01e2,$01f9,$00fe,$007f,$001f
        dw $0007,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $01f2,$01f8,$01ff,$01fd,$01fe,$00ff,$007f,$001f
        dw $0007,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $01e2,$01f8,$01fe,$01f9,$01fe,$00ff,$007f,$001f
        dw $0007,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0187,$0186,$0180,$01c6,$01e1,$00f8,$007e,$001f
        dw $0007,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0e40,$0040,$4040,$0880,$c300,$0200,$c000,$fc00
        dw $f800,$f000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $bf00,$3f00,$3e00,$f600,$3c80,$fd00,$fe00,$fc00
        dw $f800,$f000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $00c0,$00c0,$01c0,$c180,$3380,$df00,$fe00,$fc00
        dw $f800,$f000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $4000,$c000,$8000,$0000,$c000,$2000,$0000,$c000
        dw $f800,$f000,$0000,$0000,$0000,$0000,$0000,$0000

spr_pattern_turret02:
        dw $0000,$0000,$0000,$0800,$1e00,$4f00,$2700,$1383
        dw $09e4,$0e87,$07cf,$07f8,$03f0,$03b8,$0380,$0380
        dw $0000,$0000,$0000,$0400,$1400,$4a00,$2580,$12e0
        dw $091c,$0ede,$07fc,$079f,$03fd,$03e2,$03f6,$03f9
        dw $0000,$0000,$0400,$0a00,$1900,$4c80,$2640,$1303
        dw $098f,$0e8a,$07c4,$07e8,$03d0,$03e2,$03e6,$03f0
        dw $0000,$0000,$0000,$0000,$0000,$4000,$2000,$1020
        dw $0870,$0e70,$07f0,$0780,$0382,$0307,$030f,$0306
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$8000
        dw $6000,$1000,$8800,$4400,$0200,$3d00,$7f80,$3f40
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$8000,$e000,$dc00,$b700,$2500
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$8000
        dw $e000,$f000,$7800,$3c00,$1e00,$0300,$0080,$00c0
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$c000
        dw $03c4,$03d0,$01e5,$01f2,$00f8,$007d,$003e,$001f
        dw $000f,$0007,$0003,$0000,$0000,$0000,$0000,$0000
        dw $03fa,$03fe,$01fa,$01fd,$00ff,$007f,$003f,$001f
        dw $000f,$0007,$0003,$0000,$0000,$0000,$0000,$0000
        dw $03f8,$03e4,$01f2,$01f9,$00fc,$007e,$003f,$001f
        dw $000f,$0007,$0003,$0000,$0000,$0000,$0000,$0000
        dw $0381,$0399,$01cc,$01e6,$00f3,$0079,$003c,$001e
        dw $000f,$0007,$0003,$0000,$0000,$0000,$0000,$0000
        dw $3f40,$1e40,$0c40,$8180,$4300,$0400,$0800,$0000
        dw $f000,$e000,$c000,$0000,$0000,$0000,$0000,$0000
        dw $6500,$f600,$fe00,$7e00,$bc00,$fa00,$f400,$f800
        dw $f000,$e000,$c000,$0000,$0000,$0000,$0000,$0000
        dw $00c0,$01c0,$01c0,$0180,$8300,$c600,$fc00,$f800
        dw $f000,$e000,$c000,$0000,$0000,$0000,$0000,$0000
        dw $8000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$e000,$c000,$0000,$0000,$0000,$0000,$0000

spr_pattern_turret03:
        dw $0000,$0040,$0060,$0150,$0130,$01b0,$00a0,$00c0
        dw $0041,$00f5,$00f5,$00eb,$00fd,$00c0,$01c0,$01c0
        dw $0000,$0020,$0000,$0120,$0100,$0180,$0094,$00d4
        dw $0053,$00fa,$00eb,$00fc,$00fa,$00fc,$01f2,$01f5
        dw $0000,$0050,$0050,$0148,$0128,$01a8,$00a0,$00c0
        dw $0041,$00f1,$00f4,$00f3,$00fc,$00f0,$01f2,$01f4
        dw $0000,$0000,$0000,$0100,$0100,$0180,$008c,$00dc
        dw $005f,$00fe,$00e8,$00c0,$00c0,$0083,$018f,$018e
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $e000,$1800,$0400,$c400,$2200,$1200,$0100,$1900
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$c000,$e000,$f000,$f800
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $e000,$f800,$fc00,$3c00,$1e00,$0e00,$0f00,$0700
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $01c0,$01e0,$01e8,$00fa,$00f0,$0079,$007c,$003c
        dw $001f,$001f,$000f,$0000,$0000,$0000,$0000,$0000
        dw $01fa,$01fc,$01f7,$00f5,$00ff,$007e,$007f,$003f
        dw $001f,$001f,$000f,$0000,$0000,$0000,$0000,$0000
        dw $01f8,$01e8,$01f4,$00f4,$00fa,$007e,$007f,$003f
        dw $001f,$001f,$000f,$0000,$0000,$0000,$0000,$0000
        dw $0185,$01d3,$01c8,$00e8,$00e4,$0070,$0078,$0038
        dw $001c,$001f,$000f,$0000,$0000,$0000,$0000,$0000
        dw $3d00,$7e80,$7e80,$3c80,$1880,$0100,$1e00,$0000
        dw $f800,$f000,$c000,$0000,$0000,$0000,$0000,$0000
        dw $6c00,$ca00,$d200,$f400,$fc00,$f800,$e000,$fc00
        dw $f800,$f000,$c000,$0000,$0000,$0000,$0000,$0000
        dw $0300,$0180,$0180,$0380,$0380,$0700,$1e00,$fc00
        dw $f800,$f000,$c000,$0000,$0000,$0000,$0000,$0000
        dw $8000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0800,$f000,$c000,$0000,$0000,$0000,$0000,$0000

spr_pattern_turret04:
        dw $0013,$0013,$0013,$0013,$001a,$001a,$0038,$0038
        dw $003c,$0025,$0067,$004f,$00cc,$0080,$0180,$03a0
        dw $0010,$0010,$0010,$0010,$0019,$0019,$003a,$003a
        dw $003e,$003a,$007f,$0070,$00f3,$00f0,$01f6,$03d0
        dw $0012,$0012,$0012,$0012,$001a,$001a,$0038,$0038
        dw $003c,$003c,$0078,$007f,$00f0,$00f0,$01d6,$03d0
        dw $0010,$0010,$0010,$0010,$0018,$0018,$003b,$003b
        dw $003b,$0023,$0040,$0000,$0080,$000f,$012f,$032f
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $4000,$7000,$e800,$2400,$6400,$2200,$2200,$0200
        dw $0000,$0000,$0000,$0000,$0000,$0000,$8000,$8000
        dw $c000,$8000,$c000,$c000,$8000,$c000,$c000,$e000
        dw $8000,$8000,$8000,$8000,$8000,$8000,$0000,$0000
        dw $4000,$7000,$3800,$fc00,$1c00,$1e00,$1e00,$1e00
        dw $0000,$0000,$0000,$0000,$0000,$0000,$8000,$8000
        dw $8000,$8000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $03a0,$03a0,$03a0,$03a1,$0389,$0380,$03c0,$03c0
        dw $01f8,$01ff,$00ff,$001f,$0000,$0000,$0000,$0000
        dw $03df,$03d0,$03df,$03df,$03f7,$03ff,$03ff,$03ff
        dw $01ff,$01ff,$00ff,$001f,$0000,$0000,$0000,$0000
        dw $03d0,$03d0,$03d0,$03d0,$03d0,$03f0,$03f0,$03fc
        dw $01ff,$01ff,$00ff,$001f,$0000,$0000,$0000,$0000
        dw $0320,$032f,$0320,$0320,$0320,$0300,$0380,$0380
        dw $01c0,$01f8,$00ff,$001f,$0000,$0000,$0000,$0000
        dw $0200,$6200,$f200,$fa00,$fa00,$fa00,$7800,$7800
        dw $4000,$f000,$e000,$0000,$0000,$0000,$0000,$0000
        dw $e000,$e000,$9000,$2800,$4800,$9000,$e400,$8400
        dw $b800,$f000,$e000,$0000,$0000,$0000,$0000,$0000
        dw $1e00,$1e00,$0e00,$0600,$0600,$0e00,$1c00,$7c00
        dw $f800,$f000,$e000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
        dw $0000,$3000,$e000,$0000,$0000,$0000,$0000,$0000


spr_pattern_end:

spr_pattern_size	.equ	spr_pattern_end-spr_pattern

	;; satb
	.bss
satb	.ds 512	; the local SATB
