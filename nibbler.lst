#[1]   nibbler.asm
    5           0001      MAIN_BANK       .equ    1
    6                     
#[2]   pce.asm
    7                             .include "pce.asm"        
    1                     ;       ÈÆ´ÔºÅÈÆ´ÔºÅÈÆ´ÔºÅ(Fire Shark) ÂãùÊâãÁßªÊ§çÁâà for PCEngine
    2                     ;       2020/12/09
    3                     ;
    4                     ;       common definitions
    5                     ;
    6                     ;       VDC
    7                     ;
    8           0000      VdcPort         .equ    $0000
    9           0000      VdcReg          .equ    VdcPort
   10           0000      VdcStatus       .equ    VdcPort
   11           0002      VdcData         .equ    VdcPort+2
   12           0002      VdcDataL        .equ    VdcData
   13           0003      VdcDataH        .equ    VdcData+1
   14                     ;
   15                     ;       VCE
   16                     ;
   17           0400      VcePort         .equ    $0400
   18           0400      VceCtrl         .equ    VcePort
   19           0402      VceIndex        .equ    VcePort+2
   20           0402      VceIndexL       .equ    VceIndex
   21           0403      VceIndexH       .equ    VceIndex+1
   22           0404      VceData         .equ    VcePort+4
   23           0404      VceDataL        .equ    VceData
   24           0405      VceDataH        .equ    VceData+1
   25                     ;
   26                     ;       PSG
   27                     ;
   28           0800      PsgPort         .equ    $0800
   29           0800      PsgChannel      .equ    PsgPort
   30           0801      PsgMainVol      .equ    PsgPort+1
   31           0802      PsgFreqL        .equ    PsgPort+2
   32           0803      PsgFreqH        .equ    PsgPort+3
   33           0804      PsgCtrl         .equ    PsgPort+4
   34           0805      PsgChVol        .equ    PsgPort+5
   35           0806      PsgWave         .equ    PsgPort+6
   36           0807      PsgNoise        .equ    PsgPort+7
   37           0808      PsgLfoFreq      .equ    PsgPort+8
   38           0809      PsgLfoCtrl      .equ    PsgPort+9
   39                     ;
   40                     ;       timer
   41                     ;
   42           0C00      TimerPort       .equ    $0c00
   43           0C00      TimerCounter    .equ    TimerPort
   44           0C01      TimerCtrl       .equ    TimerPort+1
   45                     ;
   46                     ;       interrupt
   47                     ;
   48           1402      IntCtrlPort     .equ    $1402
   49           1402      IntCtrlMask     .equ    IntCtrlPort
   50           1403      IntCtrlState    .equ    IntCtrlPort+1
   51                     ;
   52                     ;       control pad
   53                     ;
   54           1000      PadPort         .equ    $1000
   55                     
#[1]   nibbler.asm
#[2]   bank0.asm
    8                             .include "bank0.asm"
    1                     ;       ÈÆ´ÔºÅÈÆ´ÔºÅÈÆ´ÔºÅ(Fire Shark) ÂãùÊâãÁßªÊ§çÁâà for PCEngine
    2                     ;       2020/12/09
    3                     ;
    4                     ;       „Éê„É≥„ÇØÔºê„Å´ÈÖçÁΩÆ„Åô„Åπ„Åç„Ç≥„Éº„Éâ
    5                     ;       Ââ≤„ÇäËæº„Åø„Éô„ÇØ„Çø„ÉªÂâ≤„ÇäËæº„Åø„Éè„É≥„Éâ„É©ÔºàRESETÔºâ
    6                     ;       „Ç¢„Éâ„É¨„Çπ„ÅØ $e000-$ffff
    7                     
    8           0000      BANK0_BANK .equ 0
    9                     
   10           E000              .code
   11           0000              .bank BANK0_BANK
   12                     ;
   13                     ;       interrupt vectors
   14                     ;
   15           FFF6              .org $fff6
   16  00:FFF6  00 E0             .dw     interrupt_dummy         ;$fff6 IRQ2/BRK
   17  00:FFF8  00 E0             .dw     interrupt_dummy         ;$fff8 IRQ1
   18  00:FFFA  00 E0             .dw     interrupt_dummy         ;$fffa timer
   19  00:FFFC  00 E0             .dw     interrupt_dummy         ;$fffc NMI
   20  00:FFFE  01 E0             .dw     interrupt_reset         ;$fffe RESET
   21                     ;
   22                     ;       interrupt handlers
   23                     ;
   24           E000              .org $e000
   25                     ;
   26                     ;       dummy handler
   27                     ;
   28  00:E000            interrupt_dummy:
   29  00:E000  40                rti
   30                     ;
   31                     ;       RESET interrupt handler
   32                     ;
   33  00:E001            interrupt_reset:
   34  00:E001  78                sei                             ; disable interrupt
   35  00:E002  D4                csh                             ; high speed mode
   36  00:E003  D8                cld                             ; 
   37                     
   38  00:E004  A2 FF             ldx     #$ff                    ; initialize stack pointer
   39  00:E006  9A                txs
   40                     
   41  00:E007  A9 FF             lda     #$ff                    ; map i/o bank
   42  00:E009  53 01             tam0
   43  00:E00B  A9 F8             lda     #$f8                    ; map ram bank
   44  00:E00D  53 02             tam1
   45                     
   46  00:E00F  9C 00 20          stz     $2000                   ; clear ram
   47  00:E012  73 00 20          tii     $2000,$2001,$1fff
       00:E015  01 20 FF  
       00:E018  1F        
   48                             
   49  00:E019  9C 01 0C          stz     TimerCtrl               ; stop timer
   50                     
   51  00:E01C  20 3B E0          jsr     initPsg
   52  00:E01F  20 5F E0          jsr     initVdc
   53  00:E022  20 B7 E0          jsr     initPad
   54                     
   55  00:E025  9C 02 14          stz     IntCtrlMask             ; disable interrupt
   56                     
   57  00:E028  A9 05             lda     #5
   58  00:E02A  8D 00 00          sta     VdcReg
   59  00:E02D  A9 C8             lda     #$c8                    ; enable sprite & bg / disable interrupt
   60  00:E02F  8D 02 00          sta     VdcDataL
   61  00:E032  23 00             st2     #0                      ; auto increment +1
   62                     
   63                     ;       jump to main
   64  00:E034  A9 01             lda     #BANK(main)
   65  00:E036  53 40             tam     #PAGE(main)
   66  00:E038  4C 07 C0          jmp     main
   67                     ;
   68                     ;       initialize psg
   69                     ;
   70  00:E03B            initPsg:
   71  00:E03B  9C 01 08          stz     PsgMainVol
   72  00:E03E  9C 09 08          stz     PsgLfoCtrl
   73                     
   74                     ;       disable all channels
   75  00:E041  A9 05             lda     #5
   76  00:E043  8D 00 08  .loop:  sta     PsgChannel
   77  00:E046  9C 01 08          stz     PsgMainVol
   78  00:E049  9C 04 08          stz     PsgCtrl
   79  00:E04C  3A                dec     a
   80  00:E04D  10 F4             bpl     .loop
   81                     
   82                     ;       disable noise(channel 4/5)
   83  00:E04F  A9 04             lda     #4
   84  00:E051  8D 00 08          sta     PsgChannel
   85  00:E054  9C 07 08          stz     PsgNoise
   86  00:E057  1A                inc     a
   87  00:E058  8D 00 08          sta     PsgChannel
   88  00:E05B  9C 07 08          stz     PsgNoise
   89                     
   90  00:E05E  60                rts
   91                     ;
   92                     ;       initialize VDC,VCE
   93                     ;       TODO: Ëß£ÂÉèÂ∫¶„ÅåÊ®™336„Éâ„ÉÉ„ÉàÈôêÂÆö„ÅÆË®≠ÂÆö„Å´„Å™„Å£„Å¶„ÅÑ„Çã
   94                     
   95                     ; ----
   96                     ; HSR(xres)
   97                     ; ----
   98                     ; macros to calculate the value of the HSR VDC register
   99                     ; ----
  100                     ; IN :  xres, horizontal screen resolution
  101                     ; ----
  102                     
  103                     HSR     .macro
  104                              .if (\1 <= 272)
  105                               ; low res
  106                               .db $02
  107                               .db (18 - (((\1 / 8) - 1) / 2))
  108                              .else
  109                               ; high res
  110                               .db $03
  111                               .db (24 - (((\1 / 8) - 1) / 2))
  112                              .endif
  113                             .endm
  114                     
  115                     
  116                     ; ----
  117                     ; HDR(xres)
  118                     ; ----
  119                     ; macros to calculate the value of the HDR VDC register
  120                     ; ----
  121                     ; IN :  xres, horizontal screen resolution
  122                     ; ----
  123                     
  124                     HDR     .macro
  125                              .db ((\1 / 8) - 1)
  126                              .if (\1 <= 272)
  127                               ; low res
  128                               .db (38 - ((18 - (((\1 / 8) - 1) / 2)) + (\1 / 8)))
  129                              .else
  130                               ; high res
  131                               .db (54 - ((24 - (((\1 / 8) - 1) / 2)) + (\1 / 8)))
  132                              .endif
  133                             .endm
  134                     
  135                     
  136  00:E05F            initVdc:
  137                     ;       set VDC registers from .table
  138  00:E05F  82                clx
  139  00:E060            .loop:
  140  00:E060  BD 92 E0          lda     .table,x
  141  00:E063  F0 14             beq     .endloop
  142  00:E065  8D 00 00          sta     VdcReg
  143  00:E068  E8                inx
  144  00:E069  BD 92 E0          lda     .table,x
  145  00:E06C  8D 02 00          sta     VdcDataL
  146  00:E06F  E8                inx
  147  00:E070  BD 92 E0          lda     .table,x
  148  00:E073  8D 03 00          sta     VdcDataH
  149  00:E076  E8                inx
  150  00:E077  80 E7             bra     .loop
  151  00:E079            .endloop:
  152                     
  153                     ;       init vce
  154                     ;        lda     #1              ;horizontal resolution >272!!!!!!
  155                     ;        sta     VceCtrl
  156  00:E079  9C 00 04          stz     VceCtrl
  157                     
  158                     ;       clear vram
  159  00:E07C  03 00             st0     #0
  160  00:E07E  13 00             st1     #0
  161  00:E080  23 00             st2     #0
  162  00:E082  03 02             st0     #2
  163                     
  164  00:E084  A2 80             ldx     #128
  165  00:E086  C2        .cl2:   cly
  166  00:E087  13 00     .cl1:   st1     #0
  167  00:E089  23 00             st2     #0
  168  00:E08B  88                dey
  169  00:E08C  D0 F9             bne     .cl1
  170  00:E08E  CA                dex
  171  00:E08F  D0 F5             bne     .cl2
  172                     
  173  00:E091  60                rts
  174                     
  175                     ;       resolution      256x240
  176                     ;       bat size        32x32
  177                     ;       satb copy       $7f00
  178  00:E092            .table:
  179  00:E092  05 00 00          .db     $05,$00,$00     ;control register
  180  00:E095  06 00 00          .db     $06,$00,$00     ;raster counter register
  181  00:E098  07 00 00          .db     $07,$00,$00     ;x scroll register
  182  00:E09B  08 00 00          .db     $08,$00,$00     ;y scroll register
  183  00:E09E  09 00 00          .db     $09,$00,$00     ;memory access width register
  184  00:E0A1  0A                .db     $0a             ;horizontal synchro register
  185  00:C0A2                    HSR     256
  186  00:E0A4  0B                .db     $0b             ;horizontal display register
  187  00:C0A5                    HDR     256
  188  00:E0A7  0C 02 0F          .db     $0c,$02,$0f     ;vertical synchro register
  189  00:E0AA  0D EF 00          .db     $0d,$ef,$00     ;vertical display register
  190  00:E0AD  0E 03 00          .db     $0e,$03,$00     ;vertical display end position register
  191  00:E0B0  0F 10 00          .db     $0f,$10,$00     ;dma control register
  192  00:E0B3  13 00 7F          .db     $13,$00,$7f     ;vram-satb source address register
  193  00:E0B6  00                .db     $00             ;end of table
  194                     ;
  195                     ;       initialize pad
  196                     ;
  197  00:E0B7            initPad:
  198  00:E0B7  64 00             stz     <zpad
  199  00:E0B9  64 02             stz     <zpadold
  200  00:E0BB  64 01             stz     <zpaddelta
  201  00:E0BD  60                rts
  202                     ;
  203                     ;       read pad
  204                     ;       TODO: support multi tap
  205  00:E0BE            readPad:
  206  00:E0BE  A9 01             lda     #1
  207  00:E0C0  8D 00 10          sta     PadPort
  208  00:E0C3  A9 03             lda     #3
  209  00:E0C5  8D 00 10          sta     PadPort
  210                     
  211  00:E0C8  A5 00             lda     <zpad
  212  00:E0CA  49 FF             eor     #$ff
  213  00:E0CC  85 02             sta     <zpadold
  214                     
  215  00:E0CE  A9 01             lda     #1
  216  00:E0D0  8D 00 10          sta     PadPort
  217  00:E0D3  22                sax                     ;wait 10 cycles
  218  00:E0D4  22                sax
  219  00:E0D5  EA                nop
  220  00:E0D6  EA                nop
  221  00:E0D7  AD 00 10          lda     PadPort
  222  00:E0DA  0A                asl     a
  223  00:E0DB  0A                asl     a
  224  00:E0DC  0A                asl     a
  225  00:E0DD  0A                asl     a
  226  00:E0DE  85 00             sta     <zpad
  227                     
  228  00:E0E0  9C 00 10          stz     PadPort
  229  00:E0E3  22                sax                     ;wait 10 cycles
  230  00:E0E4  22                sax
  231  00:E0E5  EA                nop
  232  00:E0E6  EA                nop
  233  00:E0E7  AD 00 10          lda     PadPort
  234  00:E0EA  29 0F             and     #$0f
  235  00:E0EC  05 00             ora     <zpad
  236  00:E0EE  49 FF             eor     #$ff
  237  00:E0F0  85 00             sta     <zpad
  238                     
  239  00:E0F2  25 02             and     <zpadold
  240  00:E0F4  85 01             sta     <zpaddelta
  241                     
  242  00:E0F6  60                rts
  243                     ;
  244           2000              .zp
  245  --:2000            zpad:          .ds 1   ;pad status
  246  --:2001            zpaddelta      .ds 1   ;pad status(delta)
  247  --:2002            zpadold        .ds 1   ;pad status(previous)
  248                     
#[1]   nibbler.asm
#[2]   main.asm
    9                             .include "main.asm"
    1                     ; Zero-page variables
    2                     
    3           2003              .zp
    4                     
    5  --:2003            ztmp0:  ds      1
    6  --:2004            ztmp1:  ds      1
    7  --:2005            ztmp2:  ds      1
    8  --:2006            ztmp3:  ds      1
    9  --:2007            ztmp4:  ds      1
   10  --:2008            ztmp5:  ds      1
   11  --:2009            ztmp6:  ds      1
   12                     
   13  --:200A            zarg0:  ds      1
   14  --:200B            zarg1:  ds      1
   15  --:200C            zarg2:  ds      1
   16  --:200D            zarg3:  ds      1
   17  --:200E            zarg4:  ds      1
   18  --:200F            zarg5:  ds      1
   19                     
   20                     ;ptr:   .ds   2         ; pointer to buffer address
   21                     ;a_cnt: .ds   1
   22                     ;x_cnt: .ds   1
   23                     
   24                     
   25                             ;; scroll counter
   26  --:2010            scrx:   .ds     2
   27  --:2012            scry:   .ds     2
   28                     
   29                     ;prevscrx:      .ds     2
   30                     ;prevscry:      .ds     2
   31                     
   32                     ;z_d_scryl:     .ds     1
   33                     ;z_d_scryh:     .ds     1
   34                             ;...
   35                     
   36                     ;z_sprx: .ds     2
   37                     ;z_spry: .ds     2
   38                     
   39                     ;z_tmp0:        .ds     1
   40                     ;z_tmp1:        .ds     1
   41                     ;z_tmp2:        .ds     1
   42                     ;z_tmp3:        .ds     1
   43                     ;z_tmp4:        .ds     1
   44                     ;z_tmp5:        .ds     1
   45                     ;z_tmp6:        .ds     1
   46                     ;z_tmp7:        .ds     1
   47                     ;z_tmp8:        .ds     1
   48                     ;z_tmp9:        .ds     1
   49                     ;z_tmp10:       .ds     1
   50                     ;z_tmp11:       .ds     1
   51                     ;z_tmp12:       .ds     1
   52                     ;z_tmp13:       .ds     1
   53                     ;z_tmp14:       .ds     1
   54                     ;z_tmp15:       .ds     1
   55                     
   56                     ;z_curchr_x:    .ds     3
   57                     ;z_curchr_y:    .ds     3
   58                     
   59  --:2014            z_frame:        .ds     1
   60                     
   61                     ;--- CODE area ----------
   62                     
   63           E0F7              .code
   64           0001              .bank MAIN_BANK
   65           C000              .org  $C000
   66                     
   67                     ;       wait VSync (polling)
   68  01:C000            waitVsync:
   69  01:C000  93 20 00  .wait:  tst     #$20,VdcStatus
       01:C003  00        
   70  01:C004  F0 FA             beq     .wait
   71  01:C006  60                rts
   72                     
   73                     
   74                     
   75                     ;
   76                     ;       main
   77                     ;
   78  01:C007            main:   
   79  01:C007  A9 04             lda     #BANK(BgPattern)
   80  01:C009  53 04             tam     #PAGE(BgPattern)
   81                     
   82                             ; set bg pattern
   83  01:C00B  03 00             st0     #0
   84  01:C00D  A9 00             lda     #$00
   85  01:C00F  8D 02 00          sta     VdcDataL
   86  01:C012  A9 10             lda     #$10
   87  01:C014  8D 03 00          sta     VdcDataH
   88  01:C017  03 02             st0     #2
   89  01:C019  E3 00 40          tia     BgPattern,VdcData,BgPattern_size
       01:C01C  02 00 C0  
       01:C01F  01        
   90                     
   91                             ; set bg palette
   92  01:C020  A9 00             lda     #LOW(0*16)
   93  01:C022  8D 02 04          sta     VceIndexL
   94  01:C025  A9 00             lda     #HIGH(0*16)
   95  01:C027  8D 03 04          sta     VceIndexH
   96  01:C02A  E3 C0 41          tia     BgPalette,VceData,16*16*2
       01:C02D  04 04 00  
       01:C030  02        
   97                     
   98                             
   99                             ; set sprite pattern
  100  01:C031  03 00             st0     #0
  101  01:C033  A9 00             lda     #$00
  102  01:C035  8D 02 00          sta     VdcDataL
  103  01:C038  A9 40             lda     #$40
  104  01:C03A  8D 03 00          sta     VdcDataH
  105  01:C03D  03 02             st0     #2
  106  01:C03F  E3 C0 43          tia     SpPattern,VdcData,SpPattern_size
       01:C042  02 00 80  
       01:C045  00        
  107                     
  108                             ; set sprite palette
  109  01:C046  A9 00             lda     #LOW(16*16)
  110  01:C048  8D 02 04          sta     VceIndexL
  111  01:C04B  A9 01             lda     #HIGH(16*16)
  112  01:C04D  8D 03 04          sta     VceIndexH
  113  01:C050  E3 40 44          tia     SpPalette,VceData,16*16*2
       01:C053  04 04 00  
       01:C056  02        
  114                     
  115                             ;vsync                  ; vsync to avoid snow
  116  01:C057  20 00 C0          jsr     waitVsync
  117                     
  118                             ; draw background (test)
  119                     
  120  01:C05A  A9 84             lda     #LOW(WaveMap_01)
  121  01:C05C  85 0A             sta     <zarg0
  122  01:C05E  A9 47             lda     #HIGH(WaveMap_01)
  123  01:C060  85 0B             sta     <zarg1
  124  01:C062  20 45 C2          jsr     DrawWave
  125                     
  126                     
  127                     
  128                             ;; initialize sprite
  129                     
  130  01:C065  20 2A C1          jsr     spr_init
  131  01:C068  20 55 C1          jsr     spr_update
  132                     
  133                     
  134                     
  135  01:C06B  20 97 C0          jsr     initPsgTest
  136                     
  137  01:C06E  20 65 C1          jsr     plInit
  138                     
  139                     ;        st0     #$0d
  140                     ;        st1     #150
  141                     ;        st2     #0
  142                     ;        st0     #$0e
  143                     ;        st1     #4+39+50
  144                     ;        st2     #0
  145                     ; dc eb
  146                     ; ef fe
  147                     ; cb d7
  148  01:C071            mainloop:
  149  01:C071  20 86 C1          jsr     plChangeDir
  150  01:C074  B0 03             bcs     .skipmove
  151  01:C076  20 FB C1          jsr     plMove
  152  01:C079            .skipmove:
  153                     ;
  154                     ;       vsync
  155                     ;
  156  01:C079  20 55 C1          jsr     spr_update
  157  01:C07C  20 00 C0          jsr     waitVsync
  158                     
  159                     ;       scroll
  160  01:C07F  03 07             st0     #7
  161  01:C081  9C 02 00          stz     VdcDataL
  162  01:C084  9C 03 00          stz     VdcDataH
  163                     
  164  01:C087  03 08             st0     #8
  165  01:C089  9C 02 00          stz     VdcDataL
  166  01:C08C  9C 03 00          stz     VdcDataH
  167                     
  168                     
  169                     ;       st0     #7
  170                     ;       lda     <scrx
  171                     ;       sta     VdcDataL
  172                     ;       lda     <scrx+1
  173                     ;       sta     VdcDataH
  174                     
  175                     ;       st0     #8
  176                     ;       lda     <scry
  177                     ;       sta     VdcDataL
  178                     ;       lda     <scry+1
  179                     ;       sta     VdcDataH
  180                     
  181                     ;       pad
  182  01:C08F  20 BE E0          jsr     readPad
  183                     
  184  01:C092  E6 14             inc     <z_frame
  185                     
  186                     ;       lda     <scrx
  187                     ;       sta     <prevscrx
  188                     ;       lda     <scrx+1
  189                     ;       sta     <prevscrx+1
  190                     ;       lda     <scry
  191                     ;       sta     <prevscry
  192                     ;       lda     <scry+1
  193                     ;       sta     <prevscry+1
  194                     
  195                     
  196                     ;       st0     #0
  197                     ;        lda     #$00
  198                     ;        sta     VdcDataL
  199                     ;        lda     #$40
  200                     ;        sta     VdcDataH
  201                     ;       st0     #2
  202                     ;       tia     spr_pattern,VdcData,1736        ;3000=29  2000=1a  1000=0a  1736=15
  203                     ;       tia     spr_pattern,VdcData,spr_pattern_size
  204                     
  205                     
  206                     
  207                     
  208  01:C094  4C 71 C0          jmp     mainloop
  209                     
  210                             
  211                     
  212                     ;.loop: bra     .loop
  213                     
  214                     ;       psg test        
  215  01:C097            initPsgTest:
  216  01:C097  A9 00             lda     #0
  217  01:C099  8D 00 08          sta     PsgChannel
  218                     
  219                     ;       write wave data
  220  01:C09C  A9 40             lda     #$40
  221  01:C09E  8D 04 08          sta     PsgCtrl
  222  01:C0A1  9C 04 08          stz     PsgCtrl
  223                     
  224  01:C0A4  82                clx
  225  01:C0A5  BD C7 C0  .loop:  lda     .wave,x
  226  01:C0A8  C9 FF             cmp     #$ff
  227  01:C0AA  F0 06             beq     .loopend
  228  01:C0AC  8D 06 08          sta     PsgWave
  229  01:C0AF  E8                inx
  230  01:C0B0  80 F3             bra     .loop
  231                     
  232  01:C0B2            .loopend:
  233                     ;       set frequency
  234  01:C0B2  A9 FE             lda     #$fe
  235  01:C0B4  8D 02 08          sta     PsgFreqL
  236  01:C0B7  9C 03 08          stz     PsgFreqH
  237                     
  238                     ;       set volume
  239                             ;lda    #$ff
  240  01:C0BA  62                cla
  241  01:C0BB  8D 05 08          sta     PsgChVol
  242  01:C0BE  8D 01 08          sta     PsgMainVol
  243                     
  244  01:C0C1  A9 8F             lda     #$8f
  245  01:C0C3  8D 04 08          sta     PsgCtrl
  246                     
  247  01:C0C6  60                rts
  248                     
  249  01:C0C7            .wave:
  250  01:C0C7  1F 1D 1B          .db     $1f,$1d,$1b,$19,$17,$15,$13,$11
       01:C0CA  19 17 15  
       01:C0CD  13 11     
  251  01:C0CF  0F 0D 0B          .db     $0f,$0d,$0b,$09,$07,$05,$03,$01
       01:C0D2  09 07 05  
       01:C0D5  03 01     
  252  01:C0D7  1F 1D 1B          .db     $1f,$1d,$1b,$19,$17,$15,$13,$11
       01:C0DA  19 17 15  
       01:C0DD  13 11     
  253  01:C0DF  0F 0D 0B          .db     $0f,$0d,$0b,$09,$07,$05,$03,$01
       01:C0E2  09 07 05  
       01:C0E5  03 01     
  254  01:C0E7  FF                .db     $ff     
  255                     
  256  01:C0E8  1F 1F 1F          .db     $1f,$1f,$1f,$1f,$1f,$1f,$1f,$1f
       01:C0EB  1F 1F 1F  
       01:C0EE  1F 1F     
  257  01:C0F0  00 00 00          .db     $00,$00,$00,$00,$00,$00,$00,$00
       01:C0F3  00 00 00  
       01:C0F6  00 00     
  258  01:C0F8  00 00 00          .db     $00,$00,$00,$00,$00,$00,$00,$00
       01:C0FB  00 00 00  
       01:C0FE  00 00     
  259  01:C100  00 00 00          .db     $00,$00,$00,$00,$00,$00,$00,$00
       01:C103  00 00 00  
       01:C106  00 00     
  260  01:C108  FF                .db     $ff
  261                     
  262  01:C109  0F 12 15          .db     $0f,$12,$15,$17,$19,$1b,$1d,$1E
       01:C10C  17 19 1B  
       01:C10F  1D 1E     
  263  01:C111  1E 1E 1D          .db     $1e,$1e,$1d,$1b,$19,$17,$15,$12
       01:C114  1B 19 17  
       01:C117  15 12     
  264  01:C119  0F 0C 09          .db     $0f,$0c,$09,$07,$05,$03,$01,$00
       01:C11C  07 05 03  
       01:C11F  01 00     
  265  01:C121  00 00 01          .db     $00,$00,$01,$03,$05,$07,$09,$0c
       01:C124  03 05 07  
       01:C127  09 0C     
  266  01:C129  FF                .db     $ff     
  267                     
  268                     
  269  01:C12A            spr_init:
  270                     
  271                             ;; clear satb
  272  01:C12A  9C 00 22          stz     satb
  273  01:C12D  73 00 22          tii     satb,satb+1,512-1
       01:C130  01 22 FF  
       01:C133  01        
  274                     
  275                             ;; set satb 0
  276  01:C134  A9 40             lda     #$40
  277  01:C136  8D 00 22          sta     satb+0
  278  01:C139  9C 01 22          stz     satb+1
  279                     
  280  01:C13C  A9 20             lda     #$20
  281  01:C13E  8D 02 22          sta     satb+2
  282  01:C141  9C 03 22          stz     satb+3
  283                     
  284  01:C144  9C 04 22          stz     satb+4
  285  01:C147  A9 02             lda     #$2             ;vram address = $4000 -> $200
  286  01:C149  8D 05 22          sta     satb+5
  287                     
  288  01:C14C  A9 80             lda     #$80            ;priority  & color=0
  289  01:C14E  8D 06 22          sta     satb+6
  290  01:C151  9C 07 22          stz     satb+7
  291                     
  292  01:C154  60                rts
  293                     
  294                     
  295  01:C155            spr_update:
  296  01:C155  03 00             st0     #0
  297  01:C157  13 00             st1     #$00
  298  01:C159  23 7F             st2     #$7f
  299  01:C15B  03 02             st0     #2
  300  01:C15D  E3 00 22          tia     satb,VdcDataL,512
       01:C160  02 00 00  
       01:C163  02        
  301  01:C164  60                rts
  302                     
  303                     
  304                     
  305                             ;...
  306                     
  307                     ;ÔΩ±ÔΩ±ÔΩ±[ USER DATA ]ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±ÔΩ±Ô
  308                     
  309                     
  310           0002              .bank  MAIN_BANK+1
  311           6000              .org   $6000
  312                     
  313                     
  314                     ;--------
  315                     ;--------
  316                     
  317                     
  318                     ;--------
  319                     ;--------
  320                     
  321                     
  322                             ;; satb
  323           2200              .bss
  324  --:2200            satb    .ds 512 ; the local SATB
#[1]   nibbler.asm
   10                     ;        .include "chrdriver.asm"
#[2]   player.asm
   11                             .include "player.asm"
    1                     
    2           2400              .bss
    3                     ;PL_x:   .ds     2
    4                     ;PL_y:   .ds     2
    5                     
    6                     
    7                     ;PL_chr: .ds     1       ;„Éó„É¨„Ç§„É§„Éº„ÅÆ„Ç≠„É£„É©Áï™Âè∑
    8                     
    9           2015              .zp
   10  --:2015            zplx:       ds      1
   11  --:2016            zply:       ds      1
   12                     
   13  --:2017            zpldir:         ds      1
   14  --:2018            zpldirr:        ds      1
   15                     
   16  --:2019            zplspeed:       ds      1
   17                     
   18           6000              .code
   19           0001              .bank   MAIN_BANK
   20                     
   21                     
   22                     ;       ldru----
   23  01:C165            plInit:
   24  01:C165  A9 68             lda     #13*8
   25  01:C167  85 15             sta     <zplx
   26  01:C169  A9 C8             lda     #25*8
   27  01:C16B  85 16             sta     <zply
   28                     
   29  01:C16D  A9 02             lda     #2
   30  01:C16F  85 19             sta     <zplspeed
   31                     
   32  01:C171  A9 20             lda     #%00100000
   33  01:C173  20 77 C1          jsr     plSetDir
   34  01:C176  60                rts
   35                     
   36                     ;
   37                     ;       ÁßªÂãïÊñπÂêë„Çí„Çª„ÉÉ„Éà
   38                     ;
   39  01:C177            plSetDir:
   40  01:C177  85 17             sta     <zpldir
   41                     
   42  01:C179  89 A0             bit     #%10100000
   43  01:C17B  F0 04             beq     .du
   44  01:C17D  49 A0             eor     #%10100000
   45  01:C17F  80 02             bra     .set
   46  01:C181  49 50     .du:    eor     #%01010000
   47  01:C183  85 18     .set:   sta     <zpldirr
   48  01:C185  60                rts
   49                     
   50                     ;
   51                     ;       ÊñπÂêëËª¢Êèõ
   52                     ;
   53                     ;       @args           „Å™„Åó
   54                     ;       @saveregs       „Å™„Åó
   55                     ;       @return         „Åù„ÅÆÂ†¥„ÅßÂÅúÊ≠¢„Åô„Åπ„ÅçÊôÇ„ÅØ cf=1
   56  01:C186            plChangeDir:
   57           2003      .tmp_vadr_l     equ     ztmp0       ;‰ªÆÊÉ≥VRAM„Ç¢„Éâ„É¨„Çπ
   58           2004      .tmp_vadr_h     equ     ztmp1
   59           2005      .tmp_p          equ     ztmp2       ;‰ªÆÊÉ≥VRAM‰∏ä„ÅÆÂÄ§
   60           2006      .tmp_pad        equ     ztmp3       ;„Ç≥„É≥„Éà„É≠„Éº„É©„Éº„ÅÆÂÄ§
   61                     
   62                                             ;„Éï„Ç£„Éº„É´„Éâ„ÅÆ„Ç∞„É™„ÉÉ„Éâ„ÅÆ‰∏≠Èñì„Å´„ÅÑ„ÇãÂ†¥Âêà„ÅØÊñπÂêëËª¢Êèõ„Åó„Å™„ÅÑ
   63  01:C186  A5 15             lda     <zplx
   64  01:C188  05 16             ora     <zply
   65  01:C18A  29 07             and     #$07
   66  01:C18C  F0 02             beq     .trychange
   67  01:C18E  18                clc
   68  01:C18F  60                rts
   69  01:C190            .trychange:
   70                                             ;‰ªÆÊÉ≥VRAM„Ç¢„Éâ„É¨„ÇπË®àÁÆó
   71  01:C190  A5 15             lda     <zplx
   72  01:C192  4A                lsr     a
   73  01:C193  4A                lsr     a
   74  01:C194  4A                lsr     a
   75  01:C195  85 03             sta     <.tmp_vadr_l
   76  01:C197  64 04             stz     <.tmp_vadr_h
   77  01:C199  A5 16             lda     <zply
   78  01:C19B  29 F8             and     #$f8
   79  01:C19D  0A                asl     a
   80  01:C19E  26 04             rol     <.tmp_vadr_h
   81  01:C1A0  0A                asl     a
   82  01:C1A1  26 04             rol     <.tmp_vadr_h
   83  01:C1A3  05 03             ora     <.tmp_vadr_l
   84  01:C1A5  18                clc
   85  01:C1A6  69 00             adc     #LOW(VMap)
   86  01:C1A8  85 03             sta     <.tmp_vadr_l
   87  01:C1AA  A5 04             lda     <.tmp_vadr_h
   88  01:C1AC  69 24             adc     #HIGH(VMap)
   89  01:C1AE  85 04             sta     <.tmp_vadr_h
   90                                             ;
   91                                             ;ÁèæÂú®‰ΩçÁΩÆ„ÅÆ‰ªÆÊÉ≥VRAM„ÅÆÂÄ§
   92  01:C1B0  B2 03             lda     [.tmp_vadr_l]
   93  01:C1B2  85 05             sta     <.tmp_p
   94                                             ;
   95                                             ;„Ç≥„É≥„Éà„É≠„Éº„É©„Éº„ÅåÊäº„Åï„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅÆÊñπÂêëËª¢ÊèõÂà§ÂÆö ldru
   96  01:C1B4  A5 00             lda     <zpad
   97  01:C1B6  29 F0             and     #$f0
   98  01:C1B8  F0 10             beq     .notpushed      ;Êäº„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ
   99  01:C1BA  85 06             sta     <.tmp_pad
  100  01:C1BC  A5 17             lda     <zpldir
  101  01:C1BE  05 18             ora     <zpldirr
  102  01:C1C0  14 06             trb     <.tmp_pad
  103  01:C1C2  F0 06             beq     .notpushed      ;ÁßªÂãïÊñπÂêë„Åä„Çà„Å≥ÈÄÜÊñπÂêë„ÅåÊäº„Åï„Çå„Å¶„ÅÑ„Å¶„ÇÇÊäº„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„Å®„Åø„Å™„Åô
  104                     
  105  01:C1C4  A5 06             lda     <.tmp_pad
  106  01:C1C6  24 05             bit     <.tmp_p
  107  01:C1C8  D0 1C             bne     .changed        ;ÁßªÂãïÊñπÂêë‰ª•Â§ñ„Åã„Å§ÈÄÜÊñπÂêë‰ª•Â§ñ„ÅåÊäº„Åï„Çå„Å¶„ÅÑ„Å¶„ÄÅ„Åù„Å£„Å°„Å´ÁßªÂãïÂèØËÉΩ„Å™„ÇâÂ§âÊõ¥
  108                     
  109                                             ;„Ç≥„É≥„Éà„É≠„Éº„É©„Éº„ÅåÊäº„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà„ÅÆÊñπÂêëËª¢ÊèõÂà§ÂÆö
  110  01:C1CA            .notpushed:
  111  01:C1CA  A5 05             lda     <.tmp_p
  112  01:C1CC  24 17             bit     <zpldir
  113  01:C1CE  D0 19             bne     .notchanged     ;Áõ¥ÈÄ≤ÂèØËÉΩ„Å™„Çâ„Åù„ÅÆ„Åæ„Åæ
  114                     
  115  01:C1D0  4A                lsr     a
  116  01:C1D1  4A                lsr     a
  117  01:C1D2  4A                lsr     a
  118  01:C1D3  4A                lsr     a
  119  01:C1D4  AA                tax
  120  01:C1D5  BD EB C1          lda     .DirCountTbl,x
  121  01:C1D8  C9 02             cmp     #2
  122  01:C1DA  F0 06             beq     .dc2            ;Áõ¥Ëßí„Å™„ÇâËá™ÂãïÁöÑ„Å´Êõ≤„Åå„Çã
  123  01:C1DC  C9 03             cmp     #3
  124  01:C1DE  D0 09             bne     .notchanged     ;ÈÄöÂ∏∏„Åì„Åì„Åß„Éñ„É©„É≥„ÉÅ„Åô„Çã„ÅÆ„ÅØ„ÅÇ„Çä„Åà„Å™„ÅÑ
  125                                             ;‰∏ÅÂ≠óË∑Ø„Å™„ÅÆ„ÅßÊñπÂêëËª¢Êèõ„ÅØ„Åó„Å™„ÅÑ„ÅåÂãï„Åã„Å™„ÅÑ
  126  01:C1E0  38                sec
  127  01:C1E1  60                rts
  128                                             ;Áõ¥Ëßí„Å´Êõ≤„Åå„Çã
  129  01:C1E2            .dc2:
  130  01:C1E2  A5 05             lda     <.tmp_p
  131  01:C1E4  45 18             eor     <zpldirr
  132  01:C1E6            .changed:
  133  01:C1E6  20 77 C1          jsr     plSetDir
  134  01:C1E9            .notchanged:
  135  01:C1E9  18                clc
  136  01:C1EA  60                rts
  137                     ;
  138                     ;       ÁßªÂãïÂèØËÉΩÊñπÂêë„ÅÆÊï∞Ôºà„Ç§„É≥„Éá„ÉÉ„ÇØ„ÇπÂÄ§„ÅÆ„Çª„ÉÉ„Éà„Åï„Çå„Åü„Éì„ÉÉ„Éà„ÅÆÊï∞Ôºâ
  139                     ;
  140  01:C1EB            .DirCountTbl:
  141  01:C1EB  00 01 01          db      0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4
       01:C1EE  02 01 02  
       01:C1F1  02 03 01  
       01:C1F4  02 02 03  
       01:C1F7  02 03 03  
       01:C1FA  04        
  142                     
  143                     ;
  144                     ;       ÁßªÂãï
  145                     ;       @args           „Å™„Åó
  146                     ;       @saveregs       „Å™„Åó
  147                     ;       @return         „Å™„Åó
  148  01:C1FB            plMove:
  149  01:C1FB  A5 17             lda     <zpldir         ;bits of zpldir = LDRU----
  150  01:C1FD  0A                asl     a
  151  01:C1FE  B0 11             bcs     .moveleft
  152  01:C200  0A                asl     a
  153  01:C201  B0 17             bcs     .movedown
  154  01:C203  0A                asl     a
  155  01:C204  B0 1D             bcs     .moveright
  156  01:C206  10 22             bpl     .notmove
  157  01:C208            .moveup:
  158  01:C208  A5 16             lda     <zply
  159  01:C20A  38                sec
  160  01:C20B  E5 19             sbc     <zplspeed
  161  01:C20D  85 16             sta     <zply
  162  01:C20F  80 19             bra     .moved
  163  01:C211            .moveleft:
  164  01:C211  A5 15             lda     <zplx
  165  01:C213  38                sec
  166  01:C214  E5 19             sbc     <zplspeed
  167  01:C216  85 15             sta     <zplx
  168  01:C218  80 10             bra     .moved
  169  01:C21A            .movedown:
  170  01:C21A  A5 16             lda     <zply
  171  01:C21C  18                clc
  172  01:C21D  65 19             adc     <zplspeed
  173  01:C21F  85 16             sta     <zply
  174  01:C221  80 07             bra     .moved
  175  01:C223            .moveright:
  176  01:C223  A5 15             lda     <zplx
  177  01:C225  18                clc
  178  01:C226  65 19             adc     <zplspeed
  179  01:C228  85 15             sta     <zplx
  180  01:C22A            .notmove:
  181  01:C22A            .moved:
  182                                             ;„Çπ„Éó„É©„Ç§„ÉàÂ∫ßÊ®ôË®≠ÂÆö
  183  01:C22A  A5 15             lda     <zplx
  184  01:C22C  18                clc
  185  01:C22D  69 1C             adc     #$20-4
  186  01:C22F  8D 02 22          sta     satb+2
  187  01:C232  9C 03 22          stz     satb+3
  188                     
  189  01:C235  A5 16             lda     <zply
  190  01:C237  18                clc
  191  01:C238  69 44             adc     #$40-4+8
  192  01:C23A  8D 00 22          sta     satb+0
  193  01:C23D  A9 00             lda     #0
  194  01:C23F  69 00             adc     #0
  195  01:C241  8D 01 22          sta     satb+1
  196                     
  197  01:C244  60                rts
  198                     
  199                     
  200                     
#[1]   nibbler.asm
   12                     ;        .include "pbullet.asm"
   13                     ;        .include "direction.asm"
   14                     ;        .include "enemy.asm"
   15                     ;        .include "ebullet.asm"
   16                     ;        .include "collision.asm"
   17                     ;        .include "effect.asm"
   18                      ;       .include        "sprpattern.asm"
   19                     
#[2]   bgpattern.asm
   20                             .include "bgpattern.asm"
    1           C245              .code
    2           0004              .bank   MAIN_BANK+3
    3           4000              .org    $4000
    4                     
    5  04:4000            BgPattern:
    6                     
    7  04:4000            bp_blank:
    8  04:4000  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:4002  00 00     
       04:4004  00 00     
       04:4006  00 00     
       04:4008  00 00     
       04:400A  00 00     
       04:400C  00 00     
       04:400E  00 00     
    9  04:4010  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:4012  00 00     
       04:4014  00 00     
       04:4016  00 00     
       04:4018  00 00     
       04:401A  00 00     
       04:401C  00 00     
       04:401E  00 00     
   10  04:4020            bp_wall_ul:
   11  04:4020  FF 00             dw $ff,$ff,$c0,$c0,$c0,$c0,$c0,$c0
       04:4022  FF 00     
       04:4024  C0 00     
       04:4026  C0 00     
       04:4028  C0 00     
       04:402A  C0 00     
       04:402C  C0 00     
       04:402E  C0 00     
   12  04:4030  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:4032  00 00     
       04:4034  00 00     
       04:4036  00 00     
       04:4038  00 00     
       04:403A  00 00     
       04:403C  00 00     
       04:403E  00 00     
   13  04:4040            bp_wall_ur:
   14  04:4040  FF 00             dw $ff,$ff,$03,$03,$03,$03,$03,$03
       04:4042  FF 00     
       04:4044  03 00     
       04:4046  03 00     
       04:4048  03 00     
       04:404A  03 00     
       04:404C  03 00     
       04:404E  03 00     
   15  04:4050  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:4052  00 00     
       04:4054  00 00     
       04:4056  00 00     
       04:4058  00 00     
       04:405A  00 00     
       04:405C  00 00     
       04:405E  00 00     
   16  04:4060            bp_wall_dl:
   17  04:4060  C0 00             dw $c0,$c0,$c0,$c0,$c0,$c0,$ff,$ff
       04:4062  C0 00     
       04:4064  C0 00     
       04:4066  C0 00     
       04:4068  C0 00     
       04:406A  C0 00     
       04:406C  FF 00     
       04:406E  FF 00     
   18  04:4070  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:4072  00 00     
       04:4074  00 00     
       04:4076  00 00     
       04:4078  00 00     
       04:407A  00 00     
       04:407C  00 00     
       04:407E  00 00     
   19  04:4080            bp_wall_dr:
   20  04:4080  03 00             dw $03,$03,$03,$03,$03,$03,$ff,$ff
       04:4082  03 00     
       04:4084  03 00     
       04:4086  03 00     
       04:4088  03 00     
       04:408A  03 00     
       04:408C  FF 00     
       04:408E  FF 00     
   21  04:4090  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:4092  00 00     
       04:4094  00 00     
       04:4096  00 00     
       04:4098  00 00     
       04:409A  00 00     
       04:409C  00 00     
       04:409E  00 00     
   22  04:40A0            bp_wall_l:
   23  04:40A0  C0 00             dw $c0,$c0,$c0,$c0,$c0,$c0,$c0,$c0
       04:40A2  C0 00     
       04:40A4  C0 00     
       04:40A6  C0 00     
       04:40A8  C0 00     
       04:40AA  C0 00     
       04:40AC  C0 00     
       04:40AE  C0 00     
   24  04:40B0  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:40B2  00 00     
       04:40B4  00 00     
       04:40B6  00 00     
       04:40B8  00 00     
       04:40BA  00 00     
       04:40BC  00 00     
       04:40BE  00 00     
   25  04:40C0            bp_wall_r:
   26  04:40C0  03 00             dw $03,$03,$03,$03,$03,$03,$03,$03
       04:40C2  03 00     
       04:40C4  03 00     
       04:40C6  03 00     
       04:40C8  03 00     
       04:40CA  03 00     
       04:40CC  03 00     
       04:40CE  03 00     
   27  04:40D0  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:40D2  00 00     
       04:40D4  00 00     
       04:40D6  00 00     
       04:40D8  00 00     
       04:40DA  00 00     
       04:40DC  00 00     
       04:40DE  00 00     
   28  04:40E0            bp_wall_u:
   29  04:40E0  FF 00             dw $ff,$ff,$00,$00,$00,$00,$00,$00
       04:40E2  FF 00     
       04:40E4  00 00     
       04:40E6  00 00     
       04:40E8  00 00     
       04:40EA  00 00     
       04:40EC  00 00     
       04:40EE  00 00     
   30  04:40F0  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:40F2  00 00     
       04:40F4  00 00     
       04:40F6  00 00     
       04:40F8  00 00     
       04:40FA  00 00     
       04:40FC  00 00     
       04:40FE  00 00     
   31  04:4100            bp_wall_d:
   32  04:4100  00 00             dw $00,$00,$00,$00,$00,$00,$ff,$ff
       04:4102  00 00     
       04:4104  00 00     
       04:4106  00 00     
       04:4108  00 00     
       04:410A  00 00     
       04:410C  FF 00     
       04:410E  FF 00     
   33  04:4110  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:4112  00 00     
       04:4114  00 00     
       04:4116  00 00     
       04:4118  00 00     
       04:411A  00 00     
       04:411C  00 00     
       04:411E  00 00     
   34  04:4120            bp_wall_blank_ul:
   35  04:4120  C0 00             dw $c0,$80,$00,$00,$00,$00,$00,$00
       04:4122  80 00     
       04:4124  00 00     
       04:4126  00 00     
       04:4128  00 00     
       04:412A  00 00     
       04:412C  00 00     
       04:412E  00 00     
   36  04:4130  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:4132  00 00     
       04:4134  00 00     
       04:4136  00 00     
       04:4138  00 00     
       04:413A  00 00     
       04:413C  00 00     
       04:413E  00 00     
   37  04:4140            bp_wall_blank_ur:
   38  04:4140  03 00             dw $03,$01,$00,$00,$00,$00,$00,$00
       04:4142  01 00     
       04:4144  00 00     
       04:4146  00 00     
       04:4148  00 00     
       04:414A  00 00     
       04:414C  00 00     
       04:414E  00 00     
   39  04:4150  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:4152  00 00     
       04:4154  00 00     
       04:4156  00 00     
       04:4158  00 00     
       04:415A  00 00     
       04:415C  00 00     
       04:415E  00 00     
   40  04:4160            bp_wall_blank_dl:
   41  04:4160  00 00             dw $00,$00,$00,$00,$00,$00,$80,$c0
       04:4162  00 00     
       04:4164  00 00     
       04:4166  00 00     
       04:4168  00 00     
       04:416A  00 00     
       04:416C  80 00     
       04:416E  C0 00     
   42  04:4170  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:4172  00 00     
       04:4174  00 00     
       04:4176  00 00     
       04:4178  00 00     
       04:417A  00 00     
       04:417C  00 00     
       04:417E  00 00     
   43  04:4180            bp_wall_blank_dr:
   44  04:4180  00 00             dw $00,$00,$00,$00,$00,$00,$01,$03
       04:4182  00 00     
       04:4184  00 00     
       04:4186  00 00     
       04:4188  00 00     
       04:418A  00 00     
       04:418C  01 00     
       04:418E  03 00     
   45  04:4190  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:4192  00 00     
       04:4194  00 00     
       04:4196  00 00     
       04:4198  00 00     
       04:419A  00 00     
       04:419C  00 00     
       04:419E  00 00     
   46                     
   47  04:41A0            bp_dot:
   48  04:41A0  00 00             dw $00,$7e,$7e,$7e,$7e,$7e,$7e,$00
       04:41A2  7E 00     
       04:41A4  7E 00     
       04:41A6  7E 00     
       04:41A8  7E 00     
       04:41AA  7E 00     
       04:41AC  7E 00     
       04:41AE  00 00     
   49  04:41B0  00 00             dw $00,$00,$00,$00,$00,$00,$00,$00
       04:41B2  00 00     
       04:41B4  00 00     
       04:41B6  00 00     
       04:41B8  00 00     
       04:41BA  00 00     
       04:41BC  00 00     
       04:41BE  00 00     
   50                     
   51  04:41C0            BgPattern_end:
   52           01C0      BgPattern_size  equ BgPattern_end-BgPattern
   53                     ; ‚îå‚îÄ‚îê
   54                     ; ‚îÇ ‚îÇ
   55                     ; ‚îî‚îÄ‚îò
   56                     
   57  04:41C0            BgPalette:
   58  04:41C0  00 00             dw $0000,$ffff,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:41C2  FF FF     
       04:41C4  20 01     
       04:41C6  00 00     
       04:41C8  00 00     
       04:41CA  00 00     
       04:41CC  00 00     
       04:41CE  00 00     
       04:41D0  07 01     
       04:41D2  C7 01     
       04:41D4  00 00     
       04:41D6  00 00     
       04:41D8  00 00     
       04:41DA  00 00     
       04:41DC  00 00     
       04:41DE  00 00     
   59  04:41E0  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:41E2  B6 01     
       04:41E4  20 01     
       04:41E6  00 00     
       04:41E8  00 00     
       04:41EA  00 00     
       04:41EC  00 00     
       04:41EE  00 00     
       04:41F0  07 01     
       04:41F2  C7 01     
       04:41F4  00 00     
       04:41F6  00 00     
       04:41F8  00 00     
       04:41FA  00 00     
       04:41FC  00 00     
       04:41FE  00 00     
   60  04:4200  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4202  B6 01     
       04:4204  20 01     
       04:4206  00 00     
       04:4208  00 00     
       04:420A  00 00     
       04:420C  00 00     
       04:420E  00 00     
       04:4210  07 01     
       04:4212  C7 01     
       04:4214  00 00     
       04:4216  00 00     
       04:4218  00 00     
       04:421A  00 00     
       04:421C  00 00     
       04:421E  00 00     
   61  04:4220  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4222  B6 01     
       04:4224  20 01     
       04:4226  00 00     
       04:4228  00 00     
       04:422A  00 00     
       04:422C  00 00     
       04:422E  00 00     
       04:4230  07 01     
       04:4232  C7 01     
       04:4234  00 00     
       04:4236  00 00     
       04:4238  00 00     
       04:423A  00 00     
       04:423C  00 00     
       04:423E  00 00     
   62  04:4240  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4242  B6 01     
       04:4244  20 01     
       04:4246  00 00     
       04:4248  00 00     
       04:424A  00 00     
       04:424C  00 00     
       04:424E  00 00     
       04:4250  07 01     
       04:4252  C7 01     
       04:4254  00 00     
       04:4256  00 00     
       04:4258  00 00     
       04:425A  00 00     
       04:425C  00 00     
       04:425E  00 00     
   63  04:4260  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4262  B6 01     
       04:4264  20 01     
       04:4266  00 00     
       04:4268  00 00     
       04:426A  00 00     
       04:426C  00 00     
       04:426E  00 00     
       04:4270  07 01     
       04:4272  C7 01     
       04:4274  00 00     
       04:4276  00 00     
       04:4278  00 00     
       04:427A  00 00     
       04:427C  00 00     
       04:427E  00 00     
   64  04:4280  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4282  B6 01     
       04:4284  20 01     
       04:4286  00 00     
       04:4288  00 00     
       04:428A  00 00     
       04:428C  00 00     
       04:428E  00 00     
       04:4290  07 01     
       04:4292  C7 01     
       04:4294  00 00     
       04:4296  00 00     
       04:4298  00 00     
       04:429A  00 00     
       04:429C  00 00     
       04:429E  00 00     
   65  04:42A0  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:42A2  B6 01     
       04:42A4  20 01     
       04:42A6  00 00     
       04:42A8  00 00     
       04:42AA  00 00     
       04:42AC  00 00     
       04:42AE  00 00     
       04:42B0  07 01     
       04:42B2  C7 01     
       04:42B4  00 00     
       04:42B6  00 00     
       04:42B8  00 00     
       04:42BA  00 00     
       04:42BC  00 00     
       04:42BE  00 00     
   66  04:42C0  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:42C2  B6 01     
       04:42C4  20 01     
       04:42C6  00 00     
       04:42C8  00 00     
       04:42CA  00 00     
       04:42CC  00 00     
       04:42CE  00 00     
       04:42D0  07 01     
       04:42D2  C7 01     
       04:42D4  00 00     
       04:42D6  00 00     
       04:42D8  00 00     
       04:42DA  00 00     
       04:42DC  00 00     
       04:42DE  00 00     
   67  04:42E0  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:42E2  B6 01     
       04:42E4  20 01     
       04:42E6  00 00     
       04:42E8  00 00     
       04:42EA  00 00     
       04:42EC  00 00     
       04:42EE  00 00     
       04:42F0  07 01     
       04:42F2  C7 01     
       04:42F4  00 00     
       04:42F6  00 00     
       04:42F8  00 00     
       04:42FA  00 00     
       04:42FC  00 00     
       04:42FE  00 00     
   68  04:4300  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4302  B6 01     
       04:4304  20 01     
       04:4306  00 00     
       04:4308  00 00     
       04:430A  00 00     
       04:430C  00 00     
       04:430E  00 00     
       04:4310  07 01     
       04:4312  C7 01     
       04:4314  00 00     
       04:4316  00 00     
       04:4318  00 00     
       04:431A  00 00     
       04:431C  00 00     
       04:431E  00 00     
   69  04:4320  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4322  B6 01     
       04:4324  20 01     
       04:4326  00 00     
       04:4328  00 00     
       04:432A  00 00     
       04:432C  00 00     
       04:432E  00 00     
       04:4330  07 01     
       04:4332  C7 01     
       04:4334  00 00     
       04:4336  00 00     
       04:4338  00 00     
       04:433A  00 00     
       04:433C  00 00     
       04:433E  00 00     
   70  04:4340  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4342  B6 01     
       04:4344  20 01     
       04:4346  00 00     
       04:4348  00 00     
       04:434A  00 00     
       04:434C  00 00     
       04:434E  00 00     
       04:4350  07 01     
       04:4352  C7 01     
       04:4354  00 00     
       04:4356  00 00     
       04:4358  00 00     
       04:435A  00 00     
       04:435C  00 00     
       04:435E  00 00     
   71  04:4360  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4362  B6 01     
       04:4364  20 01     
       04:4366  00 00     
       04:4368  00 00     
       04:436A  00 00     
       04:436C  00 00     
       04:436E  00 00     
       04:4370  07 01     
       04:4372  C7 01     
       04:4374  00 00     
       04:4376  00 00     
       04:4378  00 00     
       04:437A  00 00     
       04:437C  00 00     
       04:437E  00 00     
   72  04:4380  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4382  B6 01     
       04:4384  20 01     
       04:4386  00 00     
       04:4388  00 00     
       04:438A  00 00     
       04:438C  00 00     
       04:438E  00 00     
       04:4390  07 01     
       04:4392  C7 01     
       04:4394  00 00     
       04:4396  00 00     
       04:4398  00 00     
       04:439A  00 00     
       04:439C  00 00     
       04:439E  00 00     
   73  04:43A0  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:43A2  B6 01     
       04:43A4  20 01     
       04:43A6  00 00     
       04:43A8  00 00     
       04:43AA  00 00     
       04:43AC  00 00     
       04:43AE  00 00     
       04:43B0  07 01     
       04:43B2  C7 01     
       04:43B4  00 00     
       04:43B6  00 00     
       04:43B8  00 00     
       04:43BA  00 00     
       04:43BC  00 00     
       04:43BE  00 00     
#[1]   nibbler.asm
#[2]   sprpattern.asm
   21                             .include "sprpattern.asm"
    1           43C0              .code
    2           0004              .bank   MAIN_BANK+3
    3                     
    4  04:43C0            SpPattern:
    5                     
    6  04:43C0            sp_head:
    7  04:43C0  FF FF             dw $ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff
       04:43C2  FF FF     
       04:43C4  FF FF     
       04:43C6  FF FF     
       04:43C8  FF FF     
       04:43CA  FF FF     
       04:43CC  FF FF     
       04:43CE  FF FF     
    8  04:43D0  FF FF             dw $ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff,$ffff
       04:43D2  FF FF     
       04:43D4  FF FF     
       04:43D6  FF FF     
       04:43D8  FF FF     
       04:43DA  FF FF     
       04:43DC  FF FF     
       04:43DE  FF FF     
    9  04:43E0  00 00             dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
       04:43E2  00 00     
       04:43E4  00 00     
       04:43E6  00 00     
       04:43E8  00 00     
       04:43EA  00 00     
       04:43EC  00 00     
       04:43EE  00 00     
   10  04:43F0  00 00             dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
       04:43F2  00 00     
       04:43F4  00 00     
       04:43F6  00 00     
       04:43F8  00 00     
       04:43FA  00 00     
       04:43FC  00 00     
       04:43FE  00 00     
   11  04:4400  00 00             dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
       04:4402  00 00     
       04:4404  00 00     
       04:4406  00 00     
       04:4408  00 00     
       04:440A  00 00     
       04:440C  00 00     
       04:440E  00 00     
   12  04:4410  00 00             dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
       04:4412  00 00     
       04:4414  00 00     
       04:4416  00 00     
       04:4418  00 00     
       04:441A  00 00     
       04:441C  00 00     
       04:441E  00 00     
   13  04:4420  00 00             dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
       04:4422  00 00     
       04:4424  00 00     
       04:4426  00 00     
       04:4428  00 00     
       04:442A  00 00     
       04:442C  00 00     
       04:442E  00 00     
   14  04:4430  00 00             dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
       04:4432  00 00     
       04:4434  00 00     
       04:4436  00 00     
       04:4438  00 00     
       04:443A  00 00     
       04:443C  00 00     
       04:443E  00 00     
   15                     
   16  04:4440            SpPattern_end:
   17                     
   18           0080      SpPattern_size  equ     SpPattern_end-SpPattern
   19                     
   20                     
   21  04:4440            SpPalette:
   22  04:4440  00 00             dw $0000,$0038,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4442  38 00     
       04:4444  20 01     
       04:4446  00 00     
       04:4448  00 00     
       04:444A  00 00     
       04:444C  00 00     
       04:444E  00 00     
       04:4450  07 01     
       04:4452  C7 01     
       04:4454  00 00     
       04:4456  00 00     
       04:4458  00 00     
       04:445A  00 00     
       04:445C  00 00     
       04:445E  00 00     
   23  04:4460  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4462  B6 01     
       04:4464  20 01     
       04:4466  00 00     
       04:4468  00 00     
       04:446A  00 00     
       04:446C  00 00     
       04:446E  00 00     
       04:4470  07 01     
       04:4472  C7 01     
       04:4474  00 00     
       04:4476  00 00     
       04:4478  00 00     
       04:447A  00 00     
       04:447C  00 00     
       04:447E  00 00     
   24  04:4480  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4482  B6 01     
       04:4484  20 01     
       04:4486  00 00     
       04:4488  00 00     
       04:448A  00 00     
       04:448C  00 00     
       04:448E  00 00     
       04:4490  07 01     
       04:4492  C7 01     
       04:4494  00 00     
       04:4496  00 00     
       04:4498  00 00     
       04:449A  00 00     
       04:449C  00 00     
       04:449E  00 00     
   25  04:44A0  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:44A2  B6 01     
       04:44A4  20 01     
       04:44A6  00 00     
       04:44A8  00 00     
       04:44AA  00 00     
       04:44AC  00 00     
       04:44AE  00 00     
       04:44B0  07 01     
       04:44B2  C7 01     
       04:44B4  00 00     
       04:44B6  00 00     
       04:44B8  00 00     
       04:44BA  00 00     
       04:44BC  00 00     
       04:44BE  00 00     
   26  04:44C0  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:44C2  B6 01     
       04:44C4  20 01     
       04:44C6  00 00     
       04:44C8  00 00     
       04:44CA  00 00     
       04:44CC  00 00     
       04:44CE  00 00     
       04:44D0  07 01     
       04:44D2  C7 01     
       04:44D4  00 00     
       04:44D6  00 00     
       04:44D8  00 00     
       04:44DA  00 00     
       04:44DC  00 00     
       04:44DE  00 00     
   27  04:44E0  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:44E2  B6 01     
       04:44E4  20 01     
       04:44E6  00 00     
       04:44E8  00 00     
       04:44EA  00 00     
       04:44EC  00 00     
       04:44EE  00 00     
       04:44F0  07 01     
       04:44F2  C7 01     
       04:44F4  00 00     
       04:44F6  00 00     
       04:44F8  00 00     
       04:44FA  00 00     
       04:44FC  00 00     
       04:44FE  00 00     
   28  04:4500  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4502  B6 01     
       04:4504  20 01     
       04:4506  00 00     
       04:4508  00 00     
       04:450A  00 00     
       04:450C  00 00     
       04:450E  00 00     
       04:4510  07 01     
       04:4512  C7 01     
       04:4514  00 00     
       04:4516  00 00     
       04:4518  00 00     
       04:451A  00 00     
       04:451C  00 00     
       04:451E  00 00     
   29  04:4520  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4522  B6 01     
       04:4524  20 01     
       04:4526  00 00     
       04:4528  00 00     
       04:452A  00 00     
       04:452C  00 00     
       04:452E  00 00     
       04:4530  07 01     
       04:4532  C7 01     
       04:4534  00 00     
       04:4536  00 00     
       04:4538  00 00     
       04:453A  00 00     
       04:453C  00 00     
       04:453E  00 00     
   30  04:4540  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4542  B6 01     
       04:4544  20 01     
       04:4546  00 00     
       04:4548  00 00     
       04:454A  00 00     
       04:454C  00 00     
       04:454E  00 00     
       04:4550  07 01     
       04:4552  C7 01     
       04:4554  00 00     
       04:4556  00 00     
       04:4558  00 00     
       04:455A  00 00     
       04:455C  00 00     
       04:455E  00 00     
   31  04:4560  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4562  B6 01     
       04:4564  20 01     
       04:4566  00 00     
       04:4568  00 00     
       04:456A  00 00     
       04:456C  00 00     
       04:456E  00 00     
       04:4570  07 01     
       04:4572  C7 01     
       04:4574  00 00     
       04:4576  00 00     
       04:4578  00 00     
       04:457A  00 00     
       04:457C  00 00     
       04:457E  00 00     
   32  04:4580  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4582  B6 01     
       04:4584  20 01     
       04:4586  00 00     
       04:4588  00 00     
       04:458A  00 00     
       04:458C  00 00     
       04:458E  00 00     
       04:4590  07 01     
       04:4592  C7 01     
       04:4594  00 00     
       04:4596  00 00     
       04:4598  00 00     
       04:459A  00 00     
       04:459C  00 00     
       04:459E  00 00     
   33  04:45A0  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:45A2  B6 01     
       04:45A4  20 01     
       04:45A6  00 00     
       04:45A8  00 00     
       04:45AA  00 00     
       04:45AC  00 00     
       04:45AE  00 00     
       04:45B0  07 01     
       04:45B2  C7 01     
       04:45B4  00 00     
       04:45B6  00 00     
       04:45B8  00 00     
       04:45BA  00 00     
       04:45BC  00 00     
       04:45BE  00 00     
   34  04:45C0  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:45C2  B6 01     
       04:45C4  20 01     
       04:45C6  00 00     
       04:45C8  00 00     
       04:45CA  00 00     
       04:45CC  00 00     
       04:45CE  00 00     
       04:45D0  07 01     
       04:45D2  C7 01     
       04:45D4  00 00     
       04:45D6  00 00     
       04:45D8  00 00     
       04:45DA  00 00     
       04:45DC  00 00     
       04:45DE  00 00     
   35  04:45E0  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:45E2  B6 01     
       04:45E4  20 01     
       04:45E6  00 00     
       04:45E8  00 00     
       04:45EA  00 00     
       04:45EC  00 00     
       04:45EE  00 00     
       04:45F0  07 01     
       04:45F2  C7 01     
       04:45F4  00 00     
       04:45F6  00 00     
       04:45F8  00 00     
       04:45FA  00 00     
       04:45FC  00 00     
       04:45FE  00 00     
   36  04:4600  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4602  B6 01     
       04:4604  20 01     
       04:4606  00 00     
       04:4608  00 00     
       04:460A  00 00     
       04:460C  00 00     
       04:460E  00 00     
       04:4610  07 01     
       04:4612  C7 01     
       04:4614  00 00     
       04:4616  00 00     
       04:4618  00 00     
       04:461A  00 00     
       04:461C  00 00     
       04:461E  00 00     
   37  04:4620  00 00             dw $0000,$01b6,$0120,$0000,$0000,$0000,$0000,$0000,$0107,$01c7,$0000,$0000,$0000,$0000,$0000,$0000
       04:4622  B6 01     
       04:4624  20 01     
       04:4626  00 00     
       04:4628  00 00     
       04:462A  00 00     
       04:462C  00 00     
       04:462E  00 00     
       04:4630  07 01     
       04:4632  C7 01     
       04:4634  00 00     
       04:4636  00 00     
       04:4638  00 00     
       04:463A  00 00     
       04:463C  00 00     
       04:463E  00 00     
   38                     
#[1]   nibbler.asm
#[2]   map.asm
   22                             .include "map.asm"
    1           4640          .code
    2           0001          .bank   MAIN_BANK
    3                     
    4                     
    5                     ;   zarg0,1 = wave map address
    6  01:C245            DrawWave:
    7           200A      .arg_wavemap_l  equ zarg0   ;„Éû„ÉÉ„Éó„Éá„Éº„Çø„Ç¢„Éâ„É¨„Çπ
    8           200B      .arg_wavemap_h  equ zarg1
    9                     
   10           200C      .tmp_vram_l     equ zarg2   ;vram(BAT)„Ç¢„Éâ„É¨„Çπ
   11           200D      .tmp_vram_h     equ zarg3
   12           200E      .tmp_vmap_ptr_l equ zarg4   ;‰ªÆÊÉ≥vram„Ç¢„Éâ„É¨„Çπ
   13           200F      .tmp_vmap_ptr_h equ zarg5
   14                     
   15  01:C245  A9 20         lda #32
   16  01:C247  85 0C         sta <.tmp_vram_l
   17  01:C249  64 0D         stz <.tmp_vram_h
   18                     
   19  01:C24B  A9 00         lda #LOW(VMap)
   20  01:C24D  85 0E         sta <.tmp_vmap_ptr_l
   21  01:C24F  A9 24         lda #HIGH(VMap)
   22  01:C251  85 0F         sta <.tmp_vmap_ptr_h
   23                     
   24  01:C253  C2            cly                 ;y=„Éû„ÉÉ„Éó„Éá„Éº„Çø„ÅÆ„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ
   25  01:C254            .loop_nextrow:
   26  01:C254  A2 09         ldx #9              ;x=Ë°å„Ç´„Ç¶„É≥„Çø
   27  01:C256            .loop_nextgrid:
   28                                             ;gridÊèèÁîª
   29  01:C256  DA            phx
   30  01:C257  5A            phy
   31  01:C258  B1 0A         lda [.arg_wavemap_l],y
   32  01:C25A  20 A0 C2      jsr DrawMapGrid
   33  01:C25D  7A            ply
   34  01:C25E  FA            plx
   35                                             ;ÂÖ®gridÊ∏à„Å™„ÇâÁµÇ‰∫Ü
   36  01:C25F  C8            iny
   37  01:C260  C0 51         cpy #9*9
   38  01:C262  F0 3B         beq .loop_end
   39                                             ;1Ë°åÁµÇ‰∫ÜÔºü
   40  01:C264  CA            dex
   41  01:C265  F0 1C         beq .nextrow
   42                                             ;Âêå‰∏ÄË°å„ÅÆÂè≥Èö£„Å´ÁßªÂãï
   43  01:C267  A5 0C         lda <.tmp_vram_l
   44  01:C269  18            clc
   45  01:C26A  69 03         adc #3
   46  01:C26C  85 0C         sta <.tmp_vram_l
   47  01:C26E  A5 0D         lda <.tmp_vram_h
   48  01:C270  69 00         adc #0
   49  01:C272  85 0D         sta <.tmp_vram_h
   50                     
   51  01:C274  A5 0E         lda <.tmp_vmap_ptr_l
   52  01:C276  18            clc
   53  01:C277  69 03         adc #3
   54  01:C279  85 0E         sta <.tmp_vmap_ptr_l
   55  01:C27B  A5 0F         lda <.tmp_vmap_ptr_h
   56  01:C27D  69 00         adc #0
   57  01:C27F  85 0F         sta <.tmp_vmap_ptr_h
   58                     
   59  01:C281  80 D3         bra .loop_nextgrid
   60                     
   61                                             ;Ê¨°„ÅÆË°å„ÅÆÂ∑¶Á´Ø„Å´ÁßªÂãï
   62  01:C283            .nextrow:
   63  01:C283  A5 0C         lda <.tmp_vram_l
   64  01:C285  18            clc
   65  01:C286  69 48         adc #3*32-3*8
   66  01:C288  85 0C         sta <.tmp_vram_l
   67  01:C28A  A5 0D         lda <.tmp_vram_h
   68  01:C28C  69 00         adc #0
   69  01:C28E  85 0D         sta <.tmp_vram_h
   70                     
   71  01:C290  A5 0E         lda <.tmp_vmap_ptr_l
   72  01:C292  18            clc
   73  01:C293  69 48         adc #3*32-3*8
   74  01:C295  85 0E         sta <.tmp_vmap_ptr_l
   75  01:C297  A5 0F         lda <.tmp_vmap_ptr_h
   76  01:C299  69 00         adc #0
   77  01:C29B  85 0F         sta <.tmp_vmap_ptr_h
   78                     
   79  01:C29D  80 B5         bra .loop_nextrow
   80                     
   81  01:C29F            .loop_end:
   82  01:C29F  60            rts
   83                     
   84                     
   85                     
   86                     ;   a = the number of grid
   87                     ;   zarg2,3 = BAT address
   88                     ;   zarg4,5 = Virtual Map address
   89  01:C2A0            DrawMapGrid:
   90           200C      .arg_vram_l     equ zarg2   ;vram(BAT)„Ç¢„Éâ„É¨„Çπ
   91           200D      .arg_vram_h     equ zarg3
   92           200E      .arg_vmap_ptr_l equ zarg4   ;‰ªÆÊÉ≥vram„Ç¢„Éâ„É¨„Çπ
   93           200F      .arg_vmap_ptr_h equ zarg5
   94                     
   95           2003      .tmp_x9         equ ztmp0   ;9ÂÄçË®àÁÆóÁî®„ÉØ„Éº„ÇØ
   96           2003      .tmp_vram_l     equ ztmp0   ;vram(BAT)„Ç¢„Éâ„É¨„Çπ
   97           2004      .tmp_vram_h     equ ztmp1
   98           2005      .tmp_looprow    equ ztmp2   ;Ë°å„Ç´„Ç¶„É≥„Çø
   99           2006      .tmp_loopchar   equ ztmp3   ;
  100           2007      .tmp_dotcombi   equ ztmp4
  101           2008      .tmp_vmap_value equ ztmp5
  102                     
  103  01:C2A0  A8            tay
  104                                             ;x=grid„Éá„Éº„Çø„ÅÆ„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ
  105                                             ;gridÁï™Âè∑x9
  106  01:C2A1  29 0F         and #$0f
  107  01:C2A3  85 03         sta <.tmp_x9
  108  01:C2A5  0A            asl a
  109  01:C2A6  0A            asl a
  110  01:C2A7  0A            asl a
  111  01:C2A8  65 03         adc <.tmp_x9
  112  01:C2AA  AA            tax
  113                                             ;„Éâ„ÉÉ„ÉàÈÖçÁΩÆ
  114  01:C2AB  98            tya
  115  01:C2AC  4A            lsr a
  116  01:C2AD  4A            lsr a
  117  01:C2AE  4A            lsr a
  118  01:C2AF  4A            lsr a
  119  01:C2B0  A8            tay
  120  01:C2B1  B9 7C 47      lda DotCombination,y
  121  01:C2B4  85 07         sta <.tmp_dotcombi
  122                     
  123                                             ;vram(BAT)„Ç¢„Éâ„É¨„ÇπÂàùÊúüÂÄ§
  124  01:C2B6  A5 0C         lda <.arg_vram_l
  125  01:C2B8  85 03         sta <.tmp_vram_l
  126  01:C2BA  A5 0D         lda <.arg_vram_h
  127  01:C2BC  85 04         sta <.tmp_vram_h
  128                     
  129  01:C2BE  C2            cly                 ;y=‰ªÆÊÉ≥vram„ÅÆ„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ
  130                                             ;grid„ÅÆË°åÊï∞
  131  01:C2BF  A9 03         lda #3
  132  01:C2C1  85 05         sta <.tmp_looprow
  133                     
  134  01:C2C3            .loop_row:
  135                                             ;vram(BAT)„Ç¢„Éâ„É¨„Çπ„Çª„ÉÉ„Éà
  136  01:C2C3  03 00         st0 #0
  137  01:C2C5  A5 03         lda <.tmp_vram_l
  138  01:C2C7  8D 02 00      sta VdcDataL
  139  01:C2CA  A5 04         lda <.tmp_vram_h
  140  01:C2CC  8D 03 00      sta VdcDataH
  141  01:C2CF  03 02         st0 #2
  142                                             ;grid„ÅÆÊ∞¥Âπ≥ÊñπÂêë„ÅÆ„Ç≠„É£„É©Êï∞
  143  01:C2D1  A9 03         lda #3
  144  01:C2D3  85 06         sta <.tmp_loopchar
  145  01:C2D5            .loop_char:
  146  01:C2D5  BD EC 46      lda VMapGrids,x
  147  01:C2D8  85 08         sta <.tmp_vmap_value
  148                     
  149  01:C2DA  BD 5C 46      lda MapGrids,x
  150  01:C2DD  D0 07         bne .setchar
  151                                                 ;Á©∫ÁôΩ„Åã„Å§„Éâ„ÉÉ„Éà„ÅåÈÖçÁΩÆ„Åï„Çå„Å¶„ÅÑ„Çã„Å™„Çâ„Éâ„ÉÉ„Éà„ÅÆ„Çø„Ç§„É´„Çí„Çª„ÉÉ„Éà
  152  01:C2DF  7F 07 04      bbr7    <.tmp_dotcombi,.setchar
  153  01:C2E2  87 08         smb0    <.tmp_vmap_value    ;‰ªÆÊÉ≥vram„Å´„Éâ„ÉÉ„Éà„ÅÆ„Éï„É©„Ç∞„Çí„Çª„ÉÉ„Éà
  154  01:C2E4  A9 1A         lda #$0d*2                  ;„Éâ„ÉÉ„Éà„ÅÆ„Çø„Ç§„É´Áï™Âè∑
  155  01:C2E6            .setchar
  156                                             ;„Çø„Ç§„É´„Çívram(BAT)„Å´Êõ∏„ÅçËæº„Åø
  157  01:C2E6  5A            phy
  158  01:C2E7  A8            tay
  159  01:C2E8  B9 40 46      lda MapPartsTiles,y
  160  01:C2EB  8D 02 00      sta VdcDataL
  161  01:C2EE  B9 41 46      lda MapPartsTiles+1,y
  162  01:C2F1  8D 03 00      sta VdcDataH
  163  01:C2F4  7A            ply
  164                                             ;‰ªÆÊÉ≥vram„Å´Êõ∏„ÅçËæº„Åø
  165  01:C2F5  A5 08         lda <.tmp_vmap_value
  166  01:C2F7  91 0E         sta [.arg_vmap_ptr_l],y
  167                     
  168  01:C2F9  06 07         asl <.tmp_dotcombi
  169  01:C2FB  E8            inx
  170  01:C2FC  C8            iny
  171                     
  172  01:C2FD  C6 06         dec <.tmp_loopchar
  173  01:C2FF  D0 D4         bne .loop_char
  174                     
  175  01:C301  C6 05         dec <.tmp_looprow
  176  01:C303  F0 14         beq .end_loop
  177                                             ;Ê¨°„ÅÆË°å„Å´vram„Ç¢„Éâ„É¨„Çπ„ÇíÁßªÂãï
  178  01:C305  A5 03         lda <.tmp_vram_l
  179  01:C307  18            clc
  180  01:C308  69 20         adc #32
  181  01:C30A  85 03         sta <.tmp_vram_l
  182  01:C30C  A5 04         lda <.tmp_vram_h
  183  01:C30E  69 00         adc #0
  184  01:C310  85 04         sta <.tmp_vram_h
  185                                             ;Ê¨°„ÅÆË°å„Å´‰ªÆÊÉ≥vram„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ„ÇíÁßªÂãï
  186  01:C312  98            tya
  187  01:C313  18            clc
  188  01:C314  69 1D         adc #32-3
  189  01:C316  A8            tay
  190                     
  191  01:C317  80 AA         bra .loop_row
  192                     
  193  01:C319            .end_loop:
  194  01:C319  60            rts
  195                     
  196                     
  197           2400          .bss
  198                     ;   ‰ªÆÊÉ≥vram
  199                     ;   ÂøÖË¶Å„Å™„ÅÆ„ÅØ 27*27 „Å†„Åå„ÄÅ„Ç¢„Éâ„É¨„ÇπË®àÁÆó„ÅåÈù¢ÂÄí„Å™„ÅÆ„Åß 32*27 „Å®„Åô„Çã
  200  --:2400            VMap:   ds  32*27
#[1]   nibbler.asm
#[2]   mapdata.asm
   23                             .include "mapdata.asm"
    1           C31A          .code
    2           0004          .bank   MAIN_BANK+3
    3                     
    4                     
    5                     
    6                     ;
    7                     ;   grid„ÇíÊßãÊàê„Åô„Çã„Çø„Ç§„É´„ÅÆ„Ç≠„É£„É©„ÇØ„Çø„ÉºÁï™Âè∑ÔºàBAT„ÅÆ‰∏ã12„Éì„ÉÉ„Éà„ÅÆÂÄ§Ôºâ
    8                     ;
    9           1000      MapPartsPatternAddress  equ $1000
   10  04:4640            MapPartsTiles:
   11  04:4640  00 01         dw  (MapPartsPatternAddress+$00*16)/16  ;Á©∫ÁôΩ
   12  04:4642  01 01         dw  (MapPartsPatternAddress+$01*16)/16  ;Â∑¶‰∏ä‚îå
   13  04:4644  02 01         dw  (MapPartsPatternAddress+$02*16)/16  ;Âè≥‰∏ä‚îê
   14  04:4646  03 01         dw  (MapPartsPatternAddress+$03*16)/16  ;Â∑¶‰∏ã‚îî
   15  04:4648  04 01         dw  (MapPartsPatternAddress+$04*16)/16  ;Âè≥‰∏ã‚îê
   16  04:464A  05 01         dw  (MapPartsPatternAddress+$05*16)/16  ;Â∑¶‚îÇ
   17  04:464C  06 01         dw  (MapPartsPatternAddress+$06*16)/16  ;Âè≥‚îÇ
   18  04:464E  07 01         dw  (MapPartsPatternAddress+$07*16)/16  ;‰∏ä‚îÄ
   19  04:4650  08 01         dw  (MapPartsPatternAddress+$08*16)/16  ;‰∏ã‚îÄ
   20  04:4652  09 01         dw  (MapPartsPatternAddress+$09*16)/16  ;Â∑¶‰∏ä„Éª
   21  04:4654  0A 01         dw  (MapPartsPatternAddress+$0a*16)/16  ;Âè≥‰∏ä„Éª
   22  04:4656  0B 01         dw  (MapPartsPatternAddress+$0b*16)/16  ;Â∑¶‰∏ã„Éª
   23  04:4658  0C 01         dw  (MapPartsPatternAddress+$0c*16)/16  ;Âè≥‰∏ã„Éª
   24  04:465A  0D 01         dw  (MapPartsPatternAddress+$0d*16)/16  ;„Éâ„ÉÉ„Éà
   25                     
   26                     ;
   27                     ;   „Éû„ÉÉ„Éó„ÅÆgrid„ÅÆ‰∏≠Ë∫´
   28                     ;   grid„ÅØ3x3„ÅÆ„Çø„Ç§„É´„ÅßÊßãÊàê„Åï„Çå„ÄÅÂêÑ„Çø„Ç§„É´„Çí1„Éê„Ç§„Éà„ÅßË°®Áèæ
   29                     ;   „Çø„Ç§„É´„ÅÆÂÄ§„ÅØ MapPartsTiles „ÅÆ„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ
   30                     ;
   31                     MapGridData .macro
   32                         db  \1*2,\2*2,\3*2
   33                         .endm
   34                     
   35  04:465C            MapGrids:
   36  04:465C            MapGrid_00:
   37  04:865C                MapGridData  $01,$07,$02
   38  04:865F                MapGridData  $05,$00,$06
   39  04:8662                MapGridData  $03,$08,$04
   40  04:4665            MapGrid_01:
   41  04:8665                MapGridData  $05,$00,$06
   42  04:8668                MapGridData  $05,$00,$06
   43  04:866B                MapGridData  $03,$08,$04
   44  04:466E            MapGrid_02:
   45  04:866E                MapGridData  $01,$07,$07
   46  04:8671                MapGridData  $05,$00,$00
   47  04:8674                MapGridData  $03,$08,$08
   48  04:4677            MapGrid_03:
   49  04:8677                MapGridData  $05,$00,$0a
   50  04:867A                MapGridData  $05,$00,$00
   51  04:867D                MapGridData  $03,$08,$08
   52  04:4680            MapGrid_04:
   53  04:8680                MapGridData  $01,$07,$02
   54  04:8683                MapGridData  $05,$00,$06
   55  04:8686                MapGridData  $05,$00,$06
   56  04:4689            MapGrid_05:
   57  04:8689                MapGridData  $05,$00,$06
   58  04:868C                MapGridData  $05,$00,$06
   59  04:868F                MapGridData  $05,$00,$06
   60  04:4692            MapGrid_06:
   61  04:8692                MapGridData  $01,$07,$07
   62  04:8695                MapGridData  $05,$00,$00
   63  04:8698                MapGridData  $05,$00,$0c
   64  04:469B            MapGrid_07:
   65  04:869B                MapGridData  $05,$00,$0a
   66  04:869E                MapGridData  $05,$00,$00
   67  04:86A1                MapGridData  $05,$00,$0c
   68  04:46A4            MapGrid_08:
   69  04:86A4                MapGridData  $07,$07,$02
   70  04:86A7                MapGridData  $00,$00,$06
   71  04:86AA                MapGridData  $08,$08,$04
   72  04:46AD            MapGrid_09:
   73  04:86AD                MapGridData  $09,$00,$06
   74  04:86B0                MapGridData  $00,$00,$06
   75  04:86B3                MapGridData  $08,$08,$04
   76  04:46B6            MapGrid_0a:
   77  04:86B6                MapGridData  $07,$07,$07
   78  04:86B9                MapGridData  $00,$00,$00
   79  04:86BC                MapGridData  $08,$08,$08
   80  04:46BF            MapGrid_0b:
   81  04:86BF                MapGridData  $09,$00,$0a
   82  04:86C2                MapGridData  $00,$00,$00
   83  04:86C5                MapGridData  $08,$08,$08
   84  04:46C8            MapGrid_0c:
   85  04:86C8                MapGridData  $07,$07,$02
   86  04:86CB                MapGridData  $00,$00,$06
   87  04:86CE                MapGridData  $0b,$00,$06
   88  04:46D1            MapGrid_0d:
   89  04:86D1                MapGridData  $09,$00,$06
   90  04:86D4                MapGridData  $00,$00,$06
   91  04:86D7                MapGridData  $0b,$00,$06
   92  04:46DA            MapGrid_0e:
   93  04:86DA                MapGridData  $07,$07,$07
   94  04:86DD                MapGridData  $00,$00,$00
   95  04:86E0                MapGridData  $0b,$00,$0c
   96  04:46E3            MapGrid_0f:
   97  04:86E3                MapGridData  $09,$00,$0a
   98  04:86E6                MapGridData  $00,$00,$00
   99  04:86E9                MapGridData  $0b,$00,$0c
  100                     
  101                     ;
  102                     ;   „Éû„ÉÉ„Éó„ÅÆgrid„ÅÆ‰∏≠Ë∫´Ôºà‰ªÆÊÉ≥vramÁî®Ôºâ
  103                     ;   grid„ÅØ3x3„ÅÆ„Çø„Ç§„É´„ÅßÊßãÊàê„Åï„Çå„ÄÅÂêÑ„Çø„Ç§„É´„Çí1„Éê„Ç§„Éà„ÅßË°®Áèæ
  104                     ;   „Çø„Ç§„É´„ÅÆÂÄ§„ÅØ„ÄÅ‰∏ã‰Ωç4„Éì„ÉÉ„Éà„ÅåÁßªÂãïÂèØËÉΩÊñπÂêë„ÄÅ‰∏ä‰Ωç4„Éì„ÉÉ„Éà„ÅØ„Éï„É©„Ç∞
  105                     ;
  106                     
  107                     VMapGridData .macro
  108                         db  \1*16,\2*16,\3*16
  109                         .endm
  110                     
  111  04:46EC            VMapGrids:
  112  04:46EC            VMapGrid_00:
  113  04:86EC                VMapGridData  %0000,%0000,%0000
  114  04:86EF                VMapGridData  %0000,%0000,%0000
  115  04:86F2                VMapGridData  %0000,%0000,%0000
  116  04:46F5            VMapGrid_01:
  117  04:86F5                VMapGridData  %0000,%0101,%0000
  118  04:86F8                VMapGridData  %0000,%0001,%0000
  119  04:86FB                VMapGridData  %0000,%0000,%0000
  120  04:46FE            VMapGrid_02:
  121  04:86FE                VMapGridData  %0000,%0000,%0000
  122  04:8701                VMapGridData  %0000,%0010,%1010
  123  04:8704                VMapGridData  %0000,%0000,%0000
  124  04:4707            VMapGrid_03:
  125  04:8707                VMapGridData  %0000,%0101,%0000
  126  04:870A                VMapGridData  %0000,%0011,%1010
  127  04:870D                VMapGridData  %0000,%0000,%0000
  128  04:4710            VMapGrid_04:
  129  04:8710                VMapGridData  %0000,%0000,%0000
  130  04:8713                VMapGridData  %0000,%0100,%0000
  131  04:8716                VMapGridData  %0000,%0101,%0000
  132  04:4719            VMapGrid_05:
  133  04:8719                VMapGridData  %0000,%0101,%0000
  134  04:871C                VMapGridData  %0000,%0101,%0000
  135  04:871F                VMapGridData  %0000,%0101,%0000
  136  04:4722            VMapGrid_06:
  137  04:8722                VMapGridData  %0000,%0000,%0000
  138  04:8725                VMapGridData  %0000,%0110,%1010
  139  04:8728                VMapGridData  %0000,%0101,%0000
  140  04:472B            VMapGrid_07:
  141  04:872B                VMapGridData  %0000,%0101,%0000
  142  04:872E                VMapGridData  %0000,%0111,%1010
  143  04:8731                VMapGridData  %0000,%0101,%0000
  144  04:4734            VMapGrid_08:
  145  04:8734                VMapGridData  %0000,%0000,%0000
  146  04:8737                VMapGridData  %1010,%1000,%0000
  147  04:873A                VMapGridData  %0000,%0000,%0000
  148  04:473D            VMapGrid_09:
  149  04:873D                VMapGridData  %0000,%0101,%0000
  150  04:8740                VMapGridData  %1010,%1001,%0000
  151  04:8743                VMapGridData  %0000,%0000,%0000
  152  04:4746            VMapGrid_0a:
  153  04:8746                VMapGridData  %0000,%0000,%0000
  154  04:8749                VMapGridData  %1010,%1010,%1010
  155  04:874C                VMapGridData  %0000,%0000,%0000
  156  04:474F            VMapGrid_0b:
  157  04:874F                VMapGridData  %0000,%0101,%0000
  158  04:8752                VMapGridData  %1010,%1011,%1010
  159  04:8755                VMapGridData  %0000,%0000,%0000
  160  04:4758            VMapGrid_0c:
  161  04:8758                VMapGridData  %0000,%0000,%0000
  162  04:875B                VMapGridData  %1010,%1100,%0000
  163  04:875E                VMapGridData  %0000,%0101,%0000
  164  04:4761            VMapGrid_0d:
  165  04:8761                VMapGridData  %0000,%0101,%0000
  166  04:8764                VMapGridData  %1010,%1101,%0000
  167  04:8767                VMapGridData  %0000,%0101,%0000
  168  04:476A            VMapGrid_0e:
  169  04:876A                VMapGridData  %0000,%0000,%0000
  170  04:876D                VMapGridData  %1010,%1110,%1010
  171  04:8770                VMapGridData  %0000,%0101,%0000
  172  04:4773            VMapGrid_0f:
  173  04:8773                VMapGridData  %0000,%0101,%0000
  174  04:8776                VMapGridData  %1010,%1111,%1010
  175  04:8779                VMapGridData  %0000,%0101,%0000
  176                     
  177                     
  178                     ;
  179                     ;   grid‰∏≠„ÅÆ„Éâ„ÉÉ„Éà„ÅÆÊúâÁÑ°„ÅÆÁµÑ„ÅøÂêà„Çè„Åõ
  180                     ;   Â∑¶„ÅÆ„Éì„ÉÉ„Éà„Åã„ÇâÈ†Ü„Å´„ÄÄÂ∑¶‰∏ä„ÄÅ‰∏ä„ÄÅÂè≥‰∏ä„ÄÅÂ∑¶„ÄÅ‰∏≠Â§Æ„ÄÅÂè≥„ÄÅÂ∑¶‰∏ã„ÄÅ‰∏ã„ÄÄ„ÅÆ‰ΩçÁΩÆ„Å´ÂØæÂøú
  181                     ;   Âè≥‰∏ã„Å´ÂØæÂøú„Åô„Çã„Éì„ÉÉ„Éà„Åå„Å™„ÅÑ„Åå„ÄÅÂè≥‰∏ã„Å´„Éâ„ÉÉ„Éà„ÅåÁΩÆ„Åã„Çå„Çã„Åì„Å®„ÅØ„Å™„ÅÑ„ÅÆ„ÅßÊúâÁÑ°„ÇíË°®„Åô„Éì„ÉÉ„Éà„ÇíÁî
  182                     ;   Â∑¶‰∏ä„ÄÅÂè≥‰∏ä„ÄÅÂ∑¶‰∏ã„ÇÇ„Éâ„ÉÉ„Éà„ÅåÁΩÆ„Åã„Çå„Çã„Åì„Å®„ÅØ„Å™„ÅÑ„Åå„ÄÅ„Éû„ÉÉ„ÉóÊèèÁîªÂá¶ÁêÜ„ÅÆÈÉΩÂêà‰∏ä„ÄÅÂØæÂøú„Åô„Çã„Éì„ÉÉ„É
  183                     ;
  184  04:477C            DotCombination:
  185  04:477C  00            db  %00000000
  186  04:477D  08            db  %00001000
  187  04:477E  40            db  %01000000
  188  04:477F  01            db  %00000001
  189  04:4780  10            db  %00010000
  190  04:4781  04            db  %00000100
  191  04:4782  41            db  %01000001
  192  04:4783  14            db  %00010100
  193                     
  194                     
  195                     ;
  196                     ;   waveÔºà„Çπ„ÉÜ„Éº„Ç∏Ôºâ„ÅÆ„Éû„ÉÉ„Éó
  197                     ;   „Éû„ÉÉ„Éó„ÅØ9x9„ÅÆÊ†ºÂ≠ê„Åß„Åß„Åç„Å¶„Åä„Çä„ÄÅÂêÑÊ†ºÂ≠ê„ÅØ1„Éê„Ç§„Éà„ÅßË°®Áèæ
  198                     ;   Ê†ºÂ≠ê„Éê„Ç§„Éà„ÅÆ‰∏ä4„Éì„ÉÉ„Éà„ÅØ„Éâ„ÉÉ„ÉàÈÖçÁΩÆ„ÄÅ‰∏ã4„Éì„ÉÉ„Éà„ÅØÂ£Å„ÅÆÈÖçÁΩÆ
  199                     ;   „Éâ„ÉÉ„ÉàÈÖçÁΩÆ„ÅØ DotCombination „ÅÆ„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ
  200                     ;   Â£ÅÈÖçÁΩÆ„ÅØ MapGrids „ÅÆ„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ
  201                     ;
  202                     
  203  04:4784            WaveMap:
  204  04:4784            WaveMap_01:
  205  04:4784  06 1A 0E      db  $06,$1a,$0e,$1e,$0a,$1e,$0e,$1a,$0c
       04:4787  1E 0A 1E  
       04:478A  0E 1A 0C  
  206  04:478D  15 00 15      db  $15,$00,$15,$07,$0e,$0d,$15,$00,$15
       04:4790  07 0E 0D  
       04:4793  15 00 15  
  207  04:4796  07 0A 09      db  $07,$0a,$09,$15,$05,$15,$03,$0a,$0d
       04:4799  15 05 15  
       04:479C  03 0A 0D  
  208  04:479F  15 06 4A      db  $15,$06,$4a,$0b,$0f,$0b,$5a,$0c,$15
       04:47A2  0B 0F 0B  
       04:47A5  5A 0C 15  
  209  04:47A8  07 0B 4A      db  $07,$0b,$4a,$0e,$2b,$0e,$5a,$0b,$0d
       04:47AB  0E 2B 0E  
       04:47AE  5A 0B 0D  
  210  04:47B1  07 1A 0E      db  $07,$1a,$0e,$0d,$00,$07,$0e,$1a,$0d
       04:47B4  0D 00 07  
       04:47B7  0E 1A 0D  
  211  04:47BA  05 00 05      db  $05,$00,$05,$07,$1a,$0d,$05,$00,$05
       04:47BD  07 1A 0D  
       04:47C0  05 00 05  
  212  04:47C3  67 0A 29      db  $67,$0a,$29,$25,$00,$25,$23,$0a,$6d
       04:47C6  25 00 25  
       04:47C9  23 0A 6D  
  213  04:47CC  03 0A 0A      db  $03,$0a,$0a,$0b,$0a,$0b,$0a,$0a,$09
       04:47CF  0B 0A 0B  
       04:47D2  0A 0A 09  
  214  04:47D5            WaveMap_10:
  215  04:47D5  06 1A 0E      db  $06,$1a,$0e,$0e,$1a,$0e,$0e,$1a,$0c
       04:47D8  0E 1A 0E  
       04:47DB  0E 1A 0C  
  216  04:47DE  07 1A 0D      db  $07,$1a,$0d,$27,$1a,$2d,$07,$1a,$0d
       04:47E1  27 1A 2D  
       04:47E4  07 1A 0D  
  217  04:47E7  15 16 0B      db  $15,$16,$0b,$0f,$1a,$0f,$0b,$1c,$15
       04:47EA  0F 1A 0F  
       04:47ED  0B 1C 15  
  218  04:47F0  07 0D 06      db  $07,$0d,$06,$2d,$00,$27,$0c,$07,$0d
       04:47F3  2D 00 27  
       04:47F6  0C 07 0D  
  219  04:47F9  07 0F 1D      db  $07,$0f,$1d,$07,$1a,$0d,$17,$0f,$0d
       04:47FC  07 1A 0D  
       04:47FF  17 0F 0D  
  220  04:4802  07 0D 03      db  $07,$0d,$03,$3d,$00,$37,$09,$07,$0d
       04:4805  3D 00 37  
       04:4808  09 07 0D  
  221  04:480B  15 03 3E      db  $15,$03,$3e,$0f,$1a,$0f,$3e,$09,$15
       04:480E  0F 1A 0F  
       04:4811  3E 09 15  
  222  04:4814  07 1A 0D      db  $07,$1a,$0d,$07,$1a,$0d,$07,$1a,$0d
       04:4817  07 1A 0D  
       04:481A  07 1A 0D  
  223  04:481D  03 0A 0B      db  $03,$0a,$0b,$0b,$0a,$0b,$0b,$0a,$09
       04:4820  0B 0A 0B  
       04:4823  0B 0A 09  
#[1]   nibbler.asm
   24                             
   25                             
